!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ng2-input-autocomplete",["exports","@angular/core","@angular/common","@angular/forms"],t):t(e["ng2-input-autocomplete"]={},e.ng.core,e.ng.common,e.ng.forms)}(this,function(e,i,t,n){"use strict";var o=function(){function e(e){this.classList="autocomplete",this.selectEvent=new i.EventEmitter,this.inputChangedEvent=new i.EventEmitter,this.maxLimit=0,this.thisElement=e.nativeElement,this.selectedIndex=0,this.showAutoComplete=!1,this.value=""}return e.prototype.ngOnInit=function(){this.config&&this.config["class"]&&(this.classList+=" "+this.config["class"]),this.config&&0<this.config.max&&(this.maxLimit=this.config.max),this.placeholder="autocomplete",this.inputElement=this.thisElement.querySelector("input"),this.isNull(this.config)||(this.isNull(this.config.placeholder)||(this.placeholder=this.config.placeholder),this.isNull(this.config.sourceField)||(this.sourceField=this.config.sourceField)),this.filterItems(this.value),this.inputElement.focus()},e.prototype.ngOnChanges=function(){this.filterItems(this.value)},e.prototype.enterText=function(e){var t=this.candidates.length;switch(e.keyCode){case 27:this.showAutoComplete=!1;break;case 38:this.selectedIndex=(t+this.selectedIndex-1)%t;break;case 40:this.selectedIndex=(t+this.selectedIndex+1)%t;break;case 13:0<this.candidates.length&&this.onSelect(this.selectedIndex),e.preventDefault();break;default:this.value=e.target.value,this.inputChangedEvent.emit(this.value)}},e.prototype.onSelect=function(e){this.showAutoComplete=!1,this.value=this.candidatesLabels[e],this.selectEvent.emit(this.candidates[e])},e.prototype.onKeyUpEvent=function(e,t){13===e.keyCode&&this.onSelect(t)},e.prototype.filterItems=function(t){var n=this.sourceField,i=this.filterItem;this.items&&(this.candidates=this.items.filter(function(e){return i(e,n,t)}),0<this.maxLimit&&(this.candidates=this.candidates.slice(0,this.maxLimit)),this.buildLabels())},e.prototype.getFieldValue=function(e,t){if("string"==typeof e)return e;if(t instanceof Array){var n=e;return t.forEach(function(e){n=null!==n&&n!==undefined&&null!==n[e]&&n[e]!==undefined?n[e]:""}),n}return e[t]||""},e.prototype.isNull=function(e){return null===e||e===undefined},e.prototype.buildLabels=function(){var t=this.sourceField,n=this.getFieldValue;this.candidatesLabels=this.candidates.map(function(e){return n(e,t)})},e.prototype.filterItem=function(e,t,n){return null===n||n===undefined||0===n.length||("string"==typeof e?i=e:t instanceof Array?(i=e,t.forEach(function(e){i=null!==i&&i!==undefined&&null!==i[e]&&i[e]!==undefined?i[e]:""})):i=e[t]||"",0<=i.toLowerCase().indexOf(n.toLowerCase()));var i},e.decorators=[{type:i.Component,args:[{selector:"ng2-input-autocomplete",template:'\n  <div [ngClass]="classList">\n    <input type="text"\n      placeholder="{{placeholder}}"\n      (blur)="showAutoComplete = false;"\n      (focus)="showAutoComplete = true;"\n      [value]="value"\n      (keyup)="enterText($event)">\n    <ul *ngIf="showAutoComplete && candidates && candidates.length > 0">\n      <li *ngFor="let candidate of candidates; let idx = index"\n        [ngClass]="{ active: (idx === selectedIndex) }"\n        (keyup)="onKeyUpEvent($event, idx)"\n        (mouseover)="selectedIndex = idx;"\n        (mousedown)="onSelect(idx)">\n        {{candidatesLabels[idx]}}\n      </li>\n    </ul>\n  </div>',styles:[".autocomplete ul {\n       position: absolute;\n       left: 0;\n       width: 100%;\n       border-left: 1px solid #888;\n       border-right: 1px solid #888;\n       border-bottom: 1px solid #888;\n       list-style: none;\n       padding-left: 0px;\n       margin-top: 2px;\n       background-color: #fff;\n       z-index: 100;\n     }\n     .autocomplete li {\n       text-align: left;\n       list-style: none;\n       width: 100%;\n       padding: 0.4em 0 0.4em 0;\n     }\n     .autocomplete li.active {\n       width: 100%;\n       background-color: #4bf;\n     }\n\n     .autocomplete .highlight {\n       background-color: #e2e2e2;\n     }\n     .autocomplete li.active .highlight {\n       background: #666;\n       color: #fff;\n     }"]}]}],e.ctorParameters=function(){return[{type:i.ElementRef}]},e.propDecorators={items:[{type:i.Input}],config:[{type:i.Input}],selectEvent:[{type:i.Output}],inputChangedEvent:[{type:i.Output}]},e}(),s=function(){function e(e,t){var n=this;this.resolver=e,this.viewContainerRef=t,this.ngModelChange=new i.EventEmitter,this.inputChangedEvent=new i.EventEmitter,this.selectEvent=new i.EventEmitter,this.reset=!1,this.hideAutocomplete=function(e){n.componentRef&&(e&&e.target&&n.thisElement&&e.target===n.thisElement.parentElement||((!e||e.target!==n.thisElement&&"click"===e.type)&&(n.componentRef.destroy(),n.componentRef=undefined),n.inputElement.tabIndex<0&&(n.inputElement.tabIndex=n.tabIndex)))},this.onInputChanged=function(e){(n.inputElement.value=e)!==n.ngModel&&(n.ngModel=e,n.ngModelChange.emit(e)),n.componentRef.instance.filterItems(e),n.inputChangedEvent.emit(e)},this.onSelect=function(e){var t=n.componentRef.instance.value;t!==n.ngModel&&(n.ngModel=t,n.ngModelChange.emit(t)),n.selectEvent.emit(e),n.inputElement&&(n.inputElement.value=""+t),n.hideAutocomplete()},this.thisElement=this.viewContainerRef.element.nativeElement}return e.prototype.ngOnInit=function(){"form"!==this.thisElement.tagName.toLowerCase()&&this.createDiv()},e.prototype.ngOnDestroy=function(){this.componentRef&&(this.componentRef.instance.selectEvent.unsubscribe(),this.componentRef.instance.inputChangedEvent.unsubscribe()),document.removeEventListener("click",this.hideAutocomplete)},e.prototype.ngOnChanges=function(e){if(e.items&&this.componentRef){var t=this.componentRef.instance;t.items=e.items.currentValue,t.filterItems(t.value)}},e.prototype.ngAfterViewInit=function(){var e=this,t=this.getInputElement();this.control&&this.control.valueChanges.subscribe(function(){e.reset=!0}),t.form&&t.form.addEventListener("reset",function(){e.reset=!0})},e.prototype.showAutocomplete=function(e){this.hideAutocomplete(),e===this.thisElement&&this.createAutocomplete()},e.prototype.getInputElement=function(){var e=this.thisElement;return"INPUT"!==this.thisElement.tagName&&this.autocompleteElement&&(e=this.thisElement.querySelector("input")),e},e.prototype.createDiv=function(){var e=document.createElement("div");e.style.display="inline-block",e.style.position="relative",this.thisElement.parentElement.insertBefore(e,this.thisElement.nextSibling),e.appendChild(this.thisElement),document.addEventListener("click",this.hideAutocomplete)},e.prototype.createAutocomplete=function(){var e=this.resolver.resolveComponentFactory(o);this.componentRef=this.viewContainerRef.createComponent(e);var t=this.componentRef.instance;if(t.config=this.config,t.items=this.items,t.selectEvent.subscribe(this.onSelect),t.inputChangedEvent.subscribe(this.onInputChanged),this.autocompleteElement=this.componentRef.location.nativeElement,this.autocompleteElement.style.display="none",this.inputElement=this.getInputElement(),"INPUT"!==this.thisElement.tagName&&this.autocompleteElement&&this.inputElement.parentElement.insertBefore(this.autocompleteElement,this.inputElement.nextSibling),this.reset&&(this.ngModel="",this.reset=!1),this.inputElement.value=this.ngModel?this.ngModel:"",t.value=this.inputElement.value,this.tabIndex=this.inputElement.tabIndex,this.inputElement.tabIndex=-100,this.componentRef){var n=this.thisElement.getBoundingClientRect(),i=this.autocompleteElement.style;i.width=n.width+"px",i.position="absolute",i.zIndex="1",i.top="0",i.left="0",i.display="inline-block"}},e.decorators=[{type:i.Directive,args:[{selector:"[input-autocomplete]"}]}],e.ctorParameters=function(){return[{type:i.ComponentFactoryResolver},{type:i.ViewContainerRef}]},e.propDecorators={config:[{type:i.Input}],items:[{type:i.Input}],ngModel:[{type:i.Input}],control:[{type:i.Input}],ngModelChange:[{type:i.Output}],inputChangedEvent:[{type:i.Output}],selectEvent:[{type:i.Output}],showAutocomplete:[{type:i.HostListener,args:["click",["$event.target"]]},{type:i.HostListener,args:["focus",["$event.target"]]}]},e}(),l=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,n.FormsModule],declarations:[o,s],exports:[o,s],entryComponents:[o]}]}],e}();e.AutocompleteComponent=o,e.AutocompleteDirective=s,e.AutocompleteModule=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-input-autocomplete.umd.min.js.map