{"version":3,"names":[],"mappings":"","sources":["uriQueryBuilder.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar instanceOf_1 = require(\"./instanceOf\");\nvar UriQueryBuilder = (function () {\n    function UriQueryBuilder(model) {\n        this.model = model || {};\n    }\n    UriQueryBuilder.parse = function (query) {\n        var result = new UriQueryBuilder();\n        if (query.indexOf('?') > -1) {\n            query = query.split('?', 2)[1];\n        }\n        if (query.indexOf('#') > -1) {\n            query = query.split('#', 2)[0];\n        }\n        for (var _i = 0, _a = query.split('&'); _i < _a.length; _i++) {\n            var keyValue = _a[_i];\n            var pair = keyValue.split('=', 2).map(function (x) { return decodeURIComponent(x); });\n            var value = +pair[1];\n            if (isNaN(value)) {\n                value = pair[1];\n            }\n            if (result.model.hasOwnProperty(pair[0])) {\n                // is array\n                if (instanceOf_1.is(result.model[pair[0]], Array)) {\n                    result.model[pair[0]].push(value);\n                }\n                else {\n                    result.model[pair[0]] = [result.model[pair[0]]];\n                    result.model[pair[0]].push(value);\n                }\n            }\n            else {\n                result.model[pair[0]] = value;\n            }\n        }\n        return result;\n    };\n    UriQueryBuilder.prototype.toString = function () {\n        var keyValueList = [];\n        for (var key in this.model) {\n            if (!this.model.hasOwnProperty(key)) {\n                continue;\n            }\n            var value = this.model[key];\n            if (instanceOf_1.is(value, Boolean) || instanceOf_1.is(value, Number) || instanceOf_1.is(value, String)) {\n                keyValueList.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value.toString()));\n            }\n            else if (instanceOf_1.is(value, Array)) {\n                for (var _i = 0, _a = value; _i < _a.length; _i++) {\n                    var valueItem = _a[_i];\n                    keyValueList.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(valueItem.toString()));\n                }\n            }\n        }\n        return keyValueList.join('&');\n    };\n    return UriQueryBuilder;\n}());\nexports.UriQueryBuilder = UriQueryBuilder;\n"],"file":"uriQueryBuilder.js"}