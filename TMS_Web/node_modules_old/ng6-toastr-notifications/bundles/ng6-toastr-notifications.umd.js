(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/animations'), require('@angular/platform-browser'), require('rxjs'), require('@angular/common')) :
    typeof define === 'function' && define.amd ? define('ng6-toastr-notifications', ['exports', '@angular/core', '@angular/animations', '@angular/platform-browser', 'rxjs', '@angular/common'], factory) :
    (factory((global['ng6-toastr-notifications'] = {}),global.ng.core,global.ng.animations,global.ng.platformBrowser,global.rxjs,global.ng.common));
}(this, (function (exports,core,animations,platformBrowser,rxjs,common) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var ToastrOptions = (function () {
        function ToastrOptions() {
            this.position = "top-right";
            this.maxShown = 5;
            this.newestOnTop = false;
            this.animate = "slideFromLeft";
            this.toastTimeout = 5000;
            this.enableHTML = false;
            this.dismiss = "auto";
            this.messageClass = "toastr-message";
            this.titleClass = "toastr-title";
            this.showCloseButton = false;
        }
        ToastrOptions.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        ToastrOptions.ctorParameters = function () { return []; };
        return ToastrOptions;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var Toastr = (function () {
        function Toastr(type, message, title, data) {
            this.type = type;
            this.message = message;
            this.title = title;
            this.data = data;
            this.config = {
                position: '',
                animate: "slideFromLeft",
                dismiss: "auto",
                enableHTML: false,
                titleClass: "",
                messageClass: "",
                toastTimeout: 3000,
                showCloseButton: false
            };
        }
        /**
         * @return {?}
         */
        Toastr.prototype.dismiss = /**
         * @return {?}
         */
            function () {
                this.toastrManager.dismissToastr(this);
            };
        return Toastr;
    }());

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m)
            return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length)
                    o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var /** @type {?} */ ToastrAnimations = animations.trigger("inOut", [
        animations.state("fade", animations.style({ opacity: 1 })),
        animations.transition("void => fade", [
            animations.style({
                opacity: 1
            }),
            animations.animate("0.4s ease-in")
        ]),
        animations.transition("fade => void", [
            animations.animate("0.4s 0.1s ease-out", animations.style({
                opacity: 0
            }))
        ]),
        animations.state("slideFromLeft", animations.style({ opacity: 1, transform: "translateX(0)" })),
        animations.transition("void => slideFromLeft", [
            animations.style({
                opacity: 0,
                transform: "translateX(-100%)"
            }),
            animations.animate("0.4s ease-in")
        ]),
        animations.transition("slideFromLeft => void", [
            animations.animate("0.4s 0.1s ease-out", animations.style({
                opacity: 0,
                transform: "translateX(100%)"
            }))
        ]),
        animations.state("slideFromRight", animations.style({ opacity: 1, transform: "translateX(0)" })),
        animations.transition("void => slideFromRight", [
            animations.style({
                opacity: 0,
                transform: "translateX(100%)"
            }),
            animations.animate("0.4s ease-in")
        ]),
        animations.transition("slideFromRight => void", [
            animations.animate("0.4s 0.1s ease-out", animations.style({
                opacity: 0,
                transform: "translateX(-100%)"
            }))
        ]),
        animations.state("slideFromTop", animations.style({ opacity: 1, transform: "translateY(0)" })),
        animations.transition("void => slideFromTop", [
            animations.style({
                opacity: 0,
                transform: "translateY(-100%)"
            }),
            animations.animate("0.4s ease-in")
        ]),
        animations.transition("slideFromTop => void", [
            animations.animate("0.4s 0.1s ease-out", animations.style({
                opacity: 0,
                transform: "translateY(100%)"
            }))
        ]),
        animations.state("slideFromBottom", animations.style({ opacity: 1, transform: "translateY(0)" })),
        animations.transition("void => slideFromBottom", [
            animations.style({
                opacity: 0,
                transform: "translateY(100%)"
            }),
            animations.animate("0.4s ease-in")
        ]),
        animations.transition("slideFromBottom => void", [
            animations.animate("0.4s 0.1s ease-out", animations.style({
                opacity: 0,
                transform: "translateY(-100%)"
            }))
        ])
    ]);

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var ToastrComponent = (function () {
        function ToastrComponent(sanitizer, cdr, _zone, options) {
            this.sanitizer = sanitizer;
            this.cdr = cdr;
            this._zone = _zone;
            this.toastrs = [];
            this._fresh = true;
            this._onEnter = new rxjs.Subject();
            this._onExit = new rxjs.Subject();
            Object.assign(this, options);
        }
        /**
         * @return {?}
         */
        ToastrComponent.prototype.onEnter = /**
         * @return {?}
         */
            function () {
                return this._onEnter.asObservable();
            };
        /**
         * @return {?}
         */
        ToastrComponent.prototype.onExit = /**
         * @return {?}
         */
            function () {
                return this._onExit.asObservable();
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrComponent.prototype.addToastr = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                if (this.position.indexOf("top") > 0) {
                    if (this.newestOnTop) {
                        this.toastrs.unshift(toast);
                    }
                    else {
                        this.toastrs.push(toast);
                    }
                    if (this.toastrs.length > this.maxShown) {
                        var /** @type {?} */ diff = this.toastrs.length - this.maxShown;
                        if (this.newestOnTop) {
                            this.toastrs.splice(this.maxShown);
                        }
                        else {
                            this.toastrs.splice(0, diff);
                        }
                    }
                }
                else {
                    this.toastrs.unshift(toast);
                    if (this.toastrs.length > this.maxShown) {
                        this.toastrs.splice(this.maxShown);
                    }
                }
                if (this.animate === null && this._fresh) {
                    this._fresh = false;
                    this._onEnter.next();
                    this._onEnter.complete();
                }
                this.cdr.detectChanges();
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrComponent.prototype.removeToastr = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                if (toast.timeoutId) {
                    clearTimeout(toast.timeoutId);
                    toast.timeoutId = null;
                }
                this.toastrs = this.toastrs.filter(function (t) {
                    return t.id !== toast.id;
                });
            };
        /**
         * @return {?}
         */
        ToastrComponent.prototype.removeAllToasts = /**
         * @return {?}
         */
            function () {
                this.toastrs.forEach(function (toast) {
                    clearTimeout(toast.timeoutId);
                    toast.timeoutId = null;
                });
                this.toastrs = [];
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrComponent.prototype.clicked = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                if (this.onToastClicked) {
                    this.onToastClicked(toast);
                }
            };
        /**
         * @return {?}
         */
        ToastrComponent.prototype.anyToast = /**
         * @return {?}
         */
            function () {
                return this.toastrs.length > 0;
            };
        /**
         * @param {?} toastId
         * @return {?}
         */
        ToastrComponent.prototype.findToast = /**
         * @param {?} toastId
         * @return {?}
         */
            function (toastId) {
                try {
                    for (var _a = __values(this.toastrs), _b = _a.next(); !_b.done; _b = _a.next()) {
                        var toast = _b.value;
                        if (toast.id === toastId) {
                            return toast;
                        }
                    }
                }
                catch (e_1_1) {
                    e_1 = { error: e_1_1 };
                }
                finally {
                    try {
                        if (_b && !_b.done && (_c = _a.return))
                            _c.call(_a);
                    }
                    finally {
                        if (e_1)
                            throw e_1.error;
                    }
                }
                return null;
                var e_1, _c;
            };
        /**
         * @param {?} event
         * @return {?}
         */
        ToastrComponent.prototype.onAnimationEnd = /**
         * @param {?} event
         * @return {?}
         */
            function (event) {
                var _this = this;
                if (event.toState === "void" && !this.anyToast()) {
                    this._ngExit();
                }
                else if (this._fresh && event.fromState === "void") {
                    // notify when first animation is done
                    this._fresh = false;
                    this._zone.run(function () {
                        _this._onEnter.next();
                        _this._onEnter.complete();
                    });
                }
            };
        /**
         * @return {?}
         */
        ToastrComponent.prototype._ngExit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._zone.onMicrotaskEmpty.subscribe(function () {
                    _this._onExit.next();
                    _this._onExit.complete();
                });
            };
        /**
         * @return {?}
         */
        ToastrComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this._ngExit();
            };
        ToastrComponent.decorators = [
            { type: core.Component, args: [{
                        selector: "app-toastr",
                        template: "<div #toastrContainer id=\"toastr-container\" class=\"{{position}}\">\n  <div *ngFor=\"let toastr of toastrs\" [@inOut]=\"toastr.config.animate || animate\" (@inOut.done)=\"onAnimationEnd($event)\" class=\"toastr toastr-{{toastr.type}}\" \n  (click)=\"clicked(toastr)\">\n    <div class=\"toastr-close-button\" *ngIf=\"toastr.config.showCloseButton\" (click)=\"removeToastr(toastr)\">&times;\n    </div> \n    <div *ngIf=\"toastr.title\" class=\"to-title {{toastr.config.titleClass || titleClass}}\">{{toastr.title}}</div>\n    <div [ngSwitch]=\"toastr.config.enableHTML\">\n      <span *ngSwitchCase=\"true\" class=\"to-message {{toastr.config.messageClass || messageClass}}\" [innerHTML]=\"sanitizer.bypassSecurityTrustHtml(toastr.message)\"></span>\n      <span *ngSwitchDefault class=\"to-message {{toastr.config.messageClass || messageClass}}\">{{toastr.message}}</span>\n    </div>             \n  </div>\n</div>",
                        styles: [".to-title{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message a,.to-message label{color:#fff}.to-message a:hover{color:#ccc;text-decoration:none}.toastr-close-button{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button:focus,.toastr-close-button:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center{top:0;right:0;width:100%}.bottom-center{bottom:0;right:0;width:100%}.top-full-width{top:0;right:0;width:100%}.bottom-full-width{bottom:0;right:0;width:100%}.top-left{top:12px;left:12px}.top-right{top:12px;right:12px}.bottom-right{right:12px;bottom:12px}.bottom-left{bottom:12px;left:12px}#toastr-container{position:fixed;z-index:99999}#toastr-container *{box-sizing:border-box}#toastr-container>div{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container>div.toastr-custom{padding:15px;color:#030303}#toastr-container>div.toastr-custom .toastr-close-button{color:#999!important}#toastr-container>:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container>.toastr-info{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container>.toastr-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container>.toastr-success{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container>.toastr-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center>div,#toastr-container.top-center>div{width:300px;margin:10px auto}#toastr-container.bottom-full-width>div,#toastr-container.top-full-width>div{width:96%;margin:10px auto}.toastr{background-color:#fff}.toastr-success{background-color:#51a351}.toastr-error{background-color:#d9534f}.toastr-info{background-color:#7460ee}.toastr-warning{background-color:#f89406}.toastr-progress{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container>div{padding:8px 8px 8px 50px;width:11em}#toastr-container .toastr-close-button{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container>div{padding:8px 8px 8px 50px;width:18em}#toastr-container .toastr-close-button{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container>div{padding:15px 15px 15px 50px;width:25em}}"],
                        animations: [ToastrAnimations]
                    },] },
        ];
        /** @nocollapse */
        ToastrComponent.ctorParameters = function () {
            return [
                { type: platformBrowser.DomSanitizer },
                { type: core.ChangeDetectorRef },
                { type: core.NgZone },
                { type: ToastrOptions }
            ];
        };
        return ToastrComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var ToastrManager = (function () {
        function ToastrManager(_applicationRef, _componentFactoryResolver, _injector, ngZone, options) {
            this._applicationRef = _applicationRef;
            this._componentFactoryResolver = _componentFactoryResolver;
            this._injector = _injector;
            this.ngZone = ngZone;
            this.options = options;
            this.toastrContainers = [];
            this.index = 0;
            this.toastClicked = new rxjs.Subject();
        }
        /**
         * @template T
         * @param {?} type
         * @param {?=} providers
         * @return {?}
         */
        ToastrManager.prototype.createToastrComponent = /**
         * @template T
         * @param {?} type
         * @param {?=} providers
         * @return {?}
         */
            function (type, providers) {
                if (providers === void 0) {
                    providers = [];
                }
                // Resolve a factory for creating components of type `type`.
                var /** @type {?} */ factory = this._componentFactoryResolver.resolveComponentFactory(/** @type {?} */ (type));
                // Resolve and create an injector with the specified providers.
                var /** @type {?} */ _providers = core.ReflectiveInjector.resolve(providers);
                var /** @type {?} */ injector = core.ReflectiveInjector.fromResolvedProviders(_providers, this._injector);
                // Create new node for inserting into document.
                var /** @type {?} */ newNode = document.createElement("div");
                newNode.id = "toastr-node-" + Math.floor(Math.random() * 200);
                document.querySelector("body").appendChild(newNode);
                // Create a component using the previously resolved factory & injector.
                var /** @type {?} */ componentRef = factory.create(injector, [], newNode);
                // Insert new component node into document body.
                this.attachToApplication(componentRef);
                return componentRef;
            };
        /**
         * @template T
         * @param {?} componentRef
         * @return {?}
         */
        ToastrManager.prototype.attachToApplication = /**
         * @template T
         * @param {?} componentRef
         * @return {?}
         */
            function (componentRef) {
                this._applicationRef.attachView(componentRef.hostView);
            };
        /**
         * @template T
         * @param {?} componentRef
         * @return {?}
         */
        ToastrManager.prototype.detachFromApplication = /**
         * @template T
         * @param {?} componentRef
         * @return {?}
         */
            function (componentRef) {
                this._applicationRef.detachView(componentRef.hostView);
            };
        /**
         * @param {?} position
         * @return {?}
         */
        ToastrManager.prototype.isToastrContainerExist = /**
         * @param {?} position
         * @return {?}
         */
            function (position) {
                if (this.toastrContainers.length > 0) {
                    var /** @type {?} */ i = this.toastrContainers.findIndex(function (x) { return x.position === position; });
                    if (i > -1) {
                        return true;
                    }
                }
                return false;
            };
        /**
         * @param {?} position
         * @return {?}
         */
        ToastrManager.prototype.getToastrComponentRef = /**
         * @param {?} position
         * @return {?}
         */
            function (position) {
                if (this.toastrContainers.length > 0) {
                    var /** @type {?} */ container = this.toastrContainers.find(function (x) { return x.position === position; });
                    return container ? container.ref : null;
                }
                return null;
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrManager.prototype.createTimeout = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                var _this = this;
                var /** @type {?} */ task;
                this.ngZone.runOutsideAngular(function () {
                    task = setTimeout(function () { return _this.ngZone.run(function () { return _this.clearToast(toast); }); }, toast.config.toastTimeout);
                });
                return task.toString();
            };
        /**
         * @param {?} toast
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.setupToast = /**
         * @param {?} toast
         * @param {?=} options
         * @return {?}
         */
            function (toast, options) {
                toast.id = ++this.index;
                if (options && options.hasOwnProperty("toastTimeout")) {
                    options.dismiss = "auto";
                }
                var /** @type {?} */ customConfig = Object.assign({}, this.options, options || {});
                Object.keys(toast.config).forEach(function (k) {
                    if (customConfig.hasOwnProperty(k)) {
                        toast.config[k] = customConfig[k];
                    }
                });
                if (toast.config.dismiss === "auto") {
                    toast.timeoutId = this.createTimeout(toast);
                }
                toast.toastrManager = this; // bind ToastrManager instance to Toastr
                var /** @type {?} */ position = toast.config.position;
                if (this.isToastrContainerExist(position)) {
                    this.getToastrComponentRef(position).instance.addToastr(toast);
                }
                return toast;
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrManager.prototype.clearToast = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                var /** @type {?} */ position = toast.config.position;
                if (this.isToastrContainerExist(position)) {
                    var /** @type {?} */ instance = this.getToastrComponentRef(position).instance;
                    instance.removeToastr(toast);
                }
            };
        /**
         * @return {?}
         */
        ToastrManager.prototype.clearAllToasts = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.toastrContainers.length > 0) {
                    this.toastrContainers.forEach(function (component) {
                        console.log(component);
                        var /** @type {?} */ ref = component.ref;
                        var /** @type {?} */ instance = component.ref.instance;
                        instance.removeAllToasts();
                        _this.dispose(ref);
                    });
                }
            };
        /**
         * @param {?} toastrComponentRef
         * @return {?}
         */
        ToastrManager.prototype.dispose = /**
         * @param {?} toastrComponentRef
         * @return {?}
         */
            function (toastrComponentRef) {
                if (toastrComponentRef) {
                    var /** @type {?} */ i = this.toastrContainers.findIndex(function (x) { return x.position === toastrComponentRef.instance.position; });
                    if (i > -1) {
                        this.toastrContainers.splice(i, 1);
                    }
                    this.detachFromApplication(toastrComponentRef);
                }
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrManager.prototype._onToastClicked = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                this.toastClicked.next(toast);
                if (toast.config.dismiss !== "controlled") {
                    this.clearToast(toast);
                }
            };
        /**
         * @param {?} toast
         * @return {?}
         */
        ToastrManager.prototype.dismissToastr = /**
         * @param {?} toast
         * @return {?}
         */
            function (toast) {
                this.clearToast(toast);
            };
        /**
         * @return {?}
         */
        ToastrManager.prototype.dismissAllToastr = /**
         * @return {?}
         */
            function () {
                this.clearAllToasts();
            };
        /**
         * @return {?}
         */
        ToastrManager.prototype.onClickToast = /**
         * @return {?}
         */
            function () {
                return this.toastClicked.asObservable();
            };
        /**
         * @param {?} toastr
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.showToastr = /**
         * @param {?} toastr
         * @param {?=} options
         * @return {?}
         */
            function (toastr, options) {
                var _this = this;
                var /** @type {?} */ opt = Object.assign({}, this.options, options);
                return new Promise(function (resolve, reject) {
                    if (!_this.isToastrContainerExist(opt.position)) {
                        var /** @type {?} */ providers = [{ provide: ToastrOptions, useValue: opt }];
                        var /** @type {?} */ toastrComponentRef_1 = _this.createToastrComponent(ToastrComponent, providers);
                        toastrComponentRef_1.instance.onToastClicked = function (toast) {
                            _this._onToastClicked(toast);
                        };
                        toastrComponentRef_1.instance.onExit().subscribe(function () {
                            _this.dispose(toastrComponentRef_1);
                        });
                        _this.toastrContainers.push({
                            position: opt.position,
                            ref: toastrComponentRef_1
                        });
                    }
                    resolve(_this.setupToast(toastr, options));
                });
            };
        /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.errorToastr = /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
            function (message, title, options) {
                var /** @type {?} */ data = options && options.data ? options.data : null;
                var /** @type {?} */ toast = new Toastr("error", message, title, data);
                this.showToastr(toast, options);
                return toast;
            };
        /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.infoToastr = /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
            function (message, title, options) {
                var /** @type {?} */ data = options && options.data ? options.data : null;
                var /** @type {?} */ toast = new Toastr("info", message, title, data);
                this.showToastr(toast, options);
                return toast;
            };
        /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.successToastr = /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
            function (message, title, options) {
                var /** @type {?} */ data = options && options.data ? options.data : null;
                var /** @type {?} */ toast = new Toastr("success", message, title, data);
                this.showToastr(toast, options);
                return toast;
            };
        /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.warningToastr = /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
            function (message, title, options) {
                var /** @type {?} */ data = options && options.data ? options.data : null;
                var /** @type {?} */ toast = new Toastr("warning", message, title, data);
                this.showToastr(toast, options);
                return toast;
            };
        /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
        ToastrManager.prototype.customToastr = /**
         * @param {?} message
         * @param {?=} title
         * @param {?=} options
         * @return {?}
         */
            function (message, title, options) {
                var /** @type {?} */ data = options && options.data ? options.data : null;
                var /** @type {?} */ toast = new Toastr("custom", message, title, data);
                this.showToastr(toast, options);
                return toast;
            };
        ToastrManager.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        ToastrManager.ctorParameters = function () {
            return [
                { type: core.ApplicationRef },
                { type: core.ComponentFactoryResolver },
                { type: core.Injector },
                { type: core.NgZone },
                { type: ToastrOptions }
            ];
        };
        return ToastrManager;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var ToastrModule = (function () {
        function ToastrModule() {
        }
        /**
         * @return {?}
         */
        ToastrModule.forRoot = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: ToastrModule,
                    providers: [ToastrManager, ToastrOptions]
                };
            };
        ToastrModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [ToastrComponent],
                        entryComponents: [ToastrComponent]
                    },] },
        ];
        return ToastrModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.ToastrModule = ToastrModule;
    exports.ToastrManager = ToastrManager;
    exports.Toastr = Toastr;
    exports.ɵb = ToastrAnimations;
    exports.ɵa = ToastrComponent;
    exports.ɵc = ToastrOptions;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmc2LXRvYXN0ci1ub3RpZmljYXRpb25zLnVtZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vbmc2LXRvYXN0ci1ub3RpZmljYXRpb25zL2xpYi90b2FzdHIub3B0aW9ucy50cyIsIm5nOi8vbmc2LXRvYXN0ci1ub3RpZmljYXRpb25zL2xpYi90b2FzdHIudHMiLG51bGwsIm5nOi8vbmc2LXRvYXN0ci1ub3RpZmljYXRpb25zL2xpYi90b2FzdHIuYW5pbWF0aW9ucy50cyIsIm5nOi8vbmc2LXRvYXN0ci1ub3RpZmljYXRpb25zL2xpYi90b2FzdHIuY29tcG9uZW50LnRzIiwibmc6Ly9uZzYtdG9hc3RyLW5vdGlmaWNhdGlvbnMvbGliL3RvYXN0ci5zZXJ2aWNlLnRzIiwibmc6Ly9uZzYtdG9hc3RyLW5vdGlmaWNhdGlvbnMvbGliL3RvYXN0ci5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBUb2FzdHJPcHRpb25zIHtcclxuICBwb3NpdGlvbjogc3RyaW5nID0gXCJ0b3AtcmlnaHRcIjtcclxuICBtYXhTaG93bjogbnVtYmVyID0gNTtcclxuICBuZXdlc3RPblRvcDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGFuaW1hdGU6IHN0cmluZyA9IFwic2xpZGVGcm9tTGVmdFwiO1xyXG4gIHRvYXN0VGltZW91dDogbnVtYmVyID0gNTAwMDtcclxuICBlbmFibGVIVE1MOiBib29sZWFuID0gZmFsc2U7XHJcbiAgZGlzbWlzczogc3RyaW5nID0gXCJhdXRvXCI7IC8vJ2F1dG8nIHwgJ2NsaWNrJyB8ICdjb250cm9sbGVkJ1xyXG4gIG1lc3NhZ2VDbGFzczogc3RyaW5nID0gXCJ0b2FzdHItbWVzc2FnZVwiO1xyXG4gIHRpdGxlQ2xhc3M6IHN0cmluZyA9IFwidG9hc3RyLXRpdGxlXCI7XHJcbiAgc2hvd0Nsb3NlQnV0dG9uOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge31cclxufVxyXG4iLCJpbXBvcnQgeyBUb2FzdHJNYW5hZ2VyIH0gZnJvbSBcIi4vdG9hc3RyLnNlcnZpY2VcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9hc3RyIHtcclxuICBpZDogbnVtYmVyO1xyXG4gIHRvYXN0ck1hbmFnZXI6IFRvYXN0ck1hbmFnZXI7XHJcbiAgY29uZmlnOiBhbnkgPSB7XHJcbiAgICBwb3NpdGlvbjogJycsXHJcbiAgICBhbmltYXRlOiBcInNsaWRlRnJvbUxlZnRcIixcclxuICAgIGRpc21pc3M6IFwiYXV0b1wiLFxyXG4gICAgZW5hYmxlSFRNTDogZmFsc2UsXHJcbiAgICB0aXRsZUNsYXNzOiBcIlwiLFxyXG4gICAgbWVzc2FnZUNsYXNzOiBcIlwiLFxyXG4gICAgdG9hc3RUaW1lb3V0OiAzMDAwLFxyXG4gICAgc2hvd0Nsb3NlQnV0dG9uOiBmYWxzZVxyXG4gIH07XHJcbiAgdGltZW91dElkOiBhbnk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHR5cGU6IHN0cmluZyxcclxuICAgIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgdGl0bGU/OiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgZGF0YT86IE9iamVjdFxyXG4gICkge31cclxuXHJcbiAgcHVibGljIGRpc21pc3MoKSB7XHJcbiAgICB0aGlzLnRvYXN0ck1hbmFnZXIuZGlzbWlzc1RvYXN0cih0aGlzKTtcclxuICB9XHJcbn1cclxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIEFuaW1hdGlvblRyaWdnZXJNZXRhZGF0YSxcclxuICB0cmlnZ2VyLFxyXG4gIHN0eWxlLFxyXG4gIHN0YXRlLFxyXG4gIHRyYW5zaXRpb24sXHJcbiAgYW5pbWF0ZSxcclxuICBxdWVyeSxcclxuICBzdGFnZ2VyLFxyXG4gIGtleWZyYW1lc1xyXG59IGZyb20gXCJAYW5ndWxhci9hbmltYXRpb25zXCI7XHJcblxyXG5leHBvcnQgY29uc3QgVG9hc3RyQW5pbWF0aW9uczogQW5pbWF0aW9uVHJpZ2dlck1ldGFkYXRhID0gdHJpZ2dlcihcImluT3V0XCIsIFtcclxuICBzdGF0ZShcImZhZGVcIiwgc3R5bGUoeyBvcGFjaXR5OiAxIH0pKSxcclxuICB0cmFuc2l0aW9uKFwidm9pZCA9PiBmYWRlXCIsIFtcclxuICAgIHN0eWxlKHtcclxuICAgICAgb3BhY2l0eTogMVxyXG4gICAgfSksXHJcbiAgICBhbmltYXRlKFwiMC40cyBlYXNlLWluXCIpXHJcbiAgXSksXHJcbiAgdHJhbnNpdGlvbihcImZhZGUgPT4gdm9pZFwiLCBbXHJcbiAgICBhbmltYXRlKFxyXG4gICAgICBcIjAuNHMgMC4xcyBlYXNlLW91dFwiLFxyXG4gICAgICBzdHlsZSh7XHJcbiAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIF0pLFxyXG5cclxuICBzdGF0ZShcInNsaWRlRnJvbUxlZnRcIiwgc3R5bGUoeyBvcGFjaXR5OiAxLCB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgwKVwiIH0pKSxcclxuICB0cmFuc2l0aW9uKFwidm9pZCA9PiBzbGlkZUZyb21MZWZ0XCIsIFtcclxuICAgIHN0eWxlKHtcclxuICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVgoLTEwMCUpXCJcclxuICAgIH0pLFxyXG4gICAgYW5pbWF0ZShcIjAuNHMgZWFzZS1pblwiKVxyXG4gIF0pLFxyXG4gIHRyYW5zaXRpb24oXCJzbGlkZUZyb21MZWZ0ID0+IHZvaWRcIiwgW1xyXG4gICAgYW5pbWF0ZShcclxuICAgICAgXCIwLjRzIDAuMXMgZWFzZS1vdXRcIixcclxuICAgICAgc3R5bGUoe1xyXG4gICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVgoMTAwJSlcIlxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIF0pLFxyXG5cclxuICBzdGF0ZShcInNsaWRlRnJvbVJpZ2h0XCIsIHN0eWxlKHsgb3BhY2l0eTogMSwgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVgoMClcIiB9KSksXHJcbiAgdHJhbnNpdGlvbihcInZvaWQgPT4gc2xpZGVGcm9tUmlnaHRcIiwgW1xyXG4gICAgc3R5bGUoe1xyXG4gICAgICBvcGFjaXR5OiAwLFxyXG4gICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgxMDAlKVwiXHJcbiAgICB9KSxcclxuICAgIGFuaW1hdGUoXCIwLjRzIGVhc2UtaW5cIilcclxuICBdKSxcclxuICB0cmFuc2l0aW9uKFwic2xpZGVGcm9tUmlnaHQgPT4gdm9pZFwiLCBbXHJcbiAgICBhbmltYXRlKFxyXG4gICAgICBcIjAuNHMgMC4xcyBlYXNlLW91dFwiLFxyXG4gICAgICBzdHlsZSh7XHJcbiAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgtMTAwJSlcIlxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIF0pLFxyXG5cclxuICBzdGF0ZShcInNsaWRlRnJvbVRvcFwiLCBzdHlsZSh7IG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKDApXCIgfSkpLFxyXG4gIHRyYW5zaXRpb24oXCJ2b2lkID0+IHNsaWRlRnJvbVRvcFwiLCBbXHJcbiAgICBzdHlsZSh7XHJcbiAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKC0xMDAlKVwiXHJcbiAgICB9KSxcclxuICAgIGFuaW1hdGUoXCIwLjRzIGVhc2UtaW5cIilcclxuICBdKSxcclxuICB0cmFuc2l0aW9uKFwic2xpZGVGcm9tVG9wID0+IHZvaWRcIiwgW1xyXG4gICAgYW5pbWF0ZShcclxuICAgICAgXCIwLjRzIDAuMXMgZWFzZS1vdXRcIixcclxuICAgICAgc3R5bGUoe1xyXG4gICAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVkoMTAwJSlcIlxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIF0pLFxyXG5cclxuICBzdGF0ZShcInNsaWRlRnJvbUJvdHRvbVwiLCBzdHlsZSh7IG9wYWNpdHk6IDEsIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKDApXCIgfSkpLFxyXG4gIHRyYW5zaXRpb24oXCJ2b2lkID0+IHNsaWRlRnJvbUJvdHRvbVwiLCBbXHJcbiAgICBzdHlsZSh7XHJcbiAgICAgIG9wYWNpdHk6IDAsXHJcbiAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKDEwMCUpXCJcclxuICAgIH0pLFxyXG4gICAgYW5pbWF0ZShcIjAuNHMgZWFzZS1pblwiKVxyXG4gIF0pLFxyXG4gIHRyYW5zaXRpb24oXCJzbGlkZUZyb21Cb3R0b20gPT4gdm9pZFwiLCBbXHJcbiAgICBhbmltYXRlKFxyXG4gICAgICBcIjAuNHMgMC4xcyBlYXNlLW91dFwiLFxyXG4gICAgICBzdHlsZSh7XHJcbiAgICAgICAgb3BhY2l0eTogMCxcclxuICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWSgtMTAwJSlcIlxyXG4gICAgICB9KVxyXG4gICAgKVxyXG4gIF0pXHJcbl0pO1xyXG4iLCIvLyBDb3JlXG5pbXBvcnQgeyBDb21wb25lbnQsIENoYW5nZURldGVjdG9yUmVmLCBOZ1pvbmUsIE9uRGVzdHJveSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBBbmltYXRpb25FdmVudCB9IGZyb20gXCJAYW5ndWxhci9hbmltYXRpb25zXCI7XG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tIFwiQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3NlclwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xuXG4vLyBDb25maWdcbmltcG9ydCB7IFRvYXN0ciB9IGZyb20gXCIuL3RvYXN0clwiO1xuaW1wb3J0IHsgVG9hc3RyT3B0aW9ucyB9IGZyb20gXCIuL3RvYXN0ci5vcHRpb25zXCI7XG5pbXBvcnQgeyBUb2FzdHJBbmltYXRpb25zIH0gZnJvbSBcIi4vdG9hc3RyLmFuaW1hdGlvbnNcIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcImFwcC10b2FzdHJcIixcbiAgdGVtcGxhdGU6IGA8ZGl2ICN0b2FzdHJDb250YWluZXIgaWQ9XCJ0b2FzdHItY29udGFpbmVyXCIgY2xhc3M9XCJ7e3Bvc2l0aW9ufX1cIj5cbiAgPGRpdiAqbmdGb3I9XCJsZXQgdG9hc3RyIG9mIHRvYXN0cnNcIiBbQGluT3V0XT1cInRvYXN0ci5jb25maWcuYW5pbWF0ZSB8fCBhbmltYXRlXCIgKEBpbk91dC5kb25lKT1cIm9uQW5pbWF0aW9uRW5kKCRldmVudClcIiBjbGFzcz1cInRvYXN0ciB0b2FzdHIte3t0b2FzdHIudHlwZX19XCIgXG4gIChjbGljayk9XCJjbGlja2VkKHRvYXN0cilcIj5cbiAgICA8ZGl2IGNsYXNzPVwidG9hc3RyLWNsb3NlLWJ1dHRvblwiICpuZ0lmPVwidG9hc3RyLmNvbmZpZy5zaG93Q2xvc2VCdXR0b25cIiAoY2xpY2spPVwicmVtb3ZlVG9hc3RyKHRvYXN0cilcIj4mdGltZXM7XG4gICAgPC9kaXY+IFxuICAgIDxkaXYgKm5nSWY9XCJ0b2FzdHIudGl0bGVcIiBjbGFzcz1cInRvLXRpdGxlIHt7dG9hc3RyLmNvbmZpZy50aXRsZUNsYXNzIHx8IHRpdGxlQ2xhc3N9fVwiPnt7dG9hc3RyLnRpdGxlfX08L2Rpdj5cbiAgICA8ZGl2IFtuZ1N3aXRjaF09XCJ0b2FzdHIuY29uZmlnLmVuYWJsZUhUTUxcIj5cbiAgICAgIDxzcGFuICpuZ1N3aXRjaENhc2U9XCJ0cnVlXCIgY2xhc3M9XCJ0by1tZXNzYWdlIHt7dG9hc3RyLmNvbmZpZy5tZXNzYWdlQ2xhc3MgfHwgbWVzc2FnZUNsYXNzfX1cIiBbaW5uZXJIVE1MXT1cInNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0SHRtbCh0b2FzdHIubWVzc2FnZSlcIj48L3NwYW4+XG4gICAgICA8c3BhbiAqbmdTd2l0Y2hEZWZhdWx0IGNsYXNzPVwidG8tbWVzc2FnZSB7e3RvYXN0ci5jb25maWcubWVzc2FnZUNsYXNzIHx8IG1lc3NhZ2VDbGFzc319XCI+e3t0b2FzdHIubWVzc2FnZX19PC9zcGFuPlxuICAgIDwvZGl2PiAgICAgICAgICAgICBcbiAgPC9kaXY+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgLnRvLXRpdGxle2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6MTZweDttYXJnaW4tYm90dG9tOjhweDtjb2xvcjojZmZmfS50by1tZXNzYWdle3dvcmQtd3JhcDpicmVhay13b3JkO2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjIwcHg7ZGlzcGxheTpibG9jaztjb2xvcjojZmZmO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LnRvLW1lc3NhZ2UgYSwudG8tbWVzc2FnZSBsYWJlbHtjb2xvcjojZmZmfS50by1tZXNzYWdlIGE6aG92ZXJ7Y29sb3I6I2NjYzt0ZXh0LWRlY29yYXRpb246bm9uZX0udG9hc3RyLWNsb3NlLWJ1dHRvbntwb3NpdGlvbjpyZWxhdGl2ZTtyaWdodDotNXB4O3RvcDotMTVweDtmbG9hdDpyaWdodDtmb250LXNpemU6MjVweDtjb2xvcjojZmZmOy13ZWJraXQtdGV4dC1zaGFkb3c6MCAxcHggMCAjZmZmO3RleHQtc2hhZG93OjAgMXB4IDAgI2ZmZjtvcGFjaXR5Oi44fS50b2FzdHItY2xvc2UtYnV0dG9uOmZvY3VzLC50b2FzdHItY2xvc2UtYnV0dG9uOmhvdmVye2NvbG9yOiMwMDA7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y3Vyc29yOnBvaW50ZXI7b3BhY2l0eTouNH1idXR0b24udG9hc3RyLWNsb3NlLWJ1dHRvbntwYWRkaW5nOjA7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowIDA7Ym9yZGVyOjA7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmV9LnRvcC1jZW50ZXJ7dG9wOjA7cmlnaHQ6MDt3aWR0aDoxMDAlfS5ib3R0b20tY2VudGVye2JvdHRvbTowO3JpZ2h0OjA7d2lkdGg6MTAwJX0udG9wLWZ1bGwtd2lkdGh7dG9wOjA7cmlnaHQ6MDt3aWR0aDoxMDAlfS5ib3R0b20tZnVsbC13aWR0aHtib3R0b206MDtyaWdodDowO3dpZHRoOjEwMCV9LnRvcC1sZWZ0e3RvcDoxMnB4O2xlZnQ6MTJweH0udG9wLXJpZ2h0e3RvcDoxMnB4O3JpZ2h0OjEycHh9LmJvdHRvbS1yaWdodHtyaWdodDoxMnB4O2JvdHRvbToxMnB4fS5ib3R0b20tbGVmdHtib3R0b206MTJweDtsZWZ0OjEycHh9I3RvYXN0ci1jb250YWluZXJ7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDo5OTk5OX0jdG9hc3RyLWNvbnRhaW5lciAqe2JveC1zaXppbmc6Ym9yZGVyLWJveH0jdG9hc3RyLWNvbnRhaW5lcj5kaXZ7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbjoxMHB4IDAgNnB4O3BhZGRpbmc6MTVweCAxNXB4IDE1cHggNjBweDt3aWR0aDozNDVweDtib3JkZXItcmFkaXVzOjNweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjE1cHg7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JveC1zaGFkb3c6MCAwIDEycHggIzk5OTtjb2xvcjojZmZmO29wYWNpdHk6MX0jdG9hc3RyLWNvbnRhaW5lcj5kaXYudG9hc3RyLWN1c3RvbXtwYWRkaW5nOjE1cHg7Y29sb3I6IzAzMDMwM30jdG9hc3RyLWNvbnRhaW5lcj5kaXYudG9hc3RyLWN1c3RvbSAudG9hc3RyLWNsb3NlLWJ1dHRvbntjb2xvcjojOTk5IWltcG9ydGFudH0jdG9hc3RyLWNvbnRhaW5lcj46aG92ZXJ7Ym94LXNoYWRvdzowIDAgMTJweCAjMDAwO29wYWNpdHk6MTtjdXJzb3I6cG9pbnRlcn0jdG9hc3RyLWNvbnRhaW5lcj4udG9hc3RyLWluZm97YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzTUFBQTdEQWNkdnFHUUFBQUd3U1VSQlZFaEx0WmE5U2dOQkVNYzlzVXh4UmNvVUtTelNXSWhYcEZNaGhZV0ZoYUJnNHlQWWlXQ1haeEJMRVJzTFJTM0VRa0Vmd0NLZGpXSkF3U0tDZ29LQ2N1ZHY0TzVZTHJ0N0V6Z1hoaVUzLzQrYjJja213VmpKU3BLa1E2d0FpNGd3aFQrejN3UkJjRXoweWpTc2VVVHJjUnlmc0hzWG1EMEFtYkhPQzlJaThWSW1udVhCUGdsSHBRNXd3U1ZNN3NOblRHN1phNEp3RGRDanh5QWlIM255QTJtdGFUSnVmaURaNWRDYXFsSXRJTGgxTkhhdGZONXNrdmp4OVozOG02OUNnenVYbVpnVnJQSUdFNzYzSng5cUtzUm96V1l3NnhPSGRFUitubjJLa08rQmIrVVY1Q0JONldDNlF0QmdiUlZvenJhaEFibW02SHRVc2d0UEMxOXRGZHhYWllCT2ZrYm1GSjFWYUhBMVZBSGpkMHBwNzBvVFp6dlIrRVZyeDJZZ2Zkc3E2ZXU1NUJIWVI4aGxja2krbitrRVJVRkc4QnJBMEJ3amVBdjJNOFdMUUJ0Y3krU0Q2Zk5zbW5CM0FsQkxyZ1R0VlcxYzJRTjRiVldMQVRhSVM2MEoyRHU1eTFUaUpnalNCdkZWWmdUbXdDVStkQVpGb1B4R0VFczhueUhDOUJ3ZTJHdkVKdjJXWFpiMHZqZHlGVDRDeGszZS9rSXFsT0dvVkx3d1BldnBZSFQrMDBUK2hXd1hEZjRBSkFPVXFXY0RoYndBQUFBQVNVVk9SSzVDWUlJPSkhaW1wb3J0YW50fSN0b2FzdHItY29udGFpbmVyPi50b2FzdHItZXJyb3J7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzTUFBQTdEQWNkdnFHUUFBQUhPU1VSQlZFaExyWmEvU2dOQkVNWnpoMFdLQ0NsU0NLYUlZT0VEK0FBS2VRUUxHOEhXenRMQ0ltQnJZYWRnSWRZK2dJS05Za0JGU3d1N0NBb3FDZ2trb0dCSS9FMjhQZGJMWm1lRExnelp6Y3g4My96WjJTU1hDMWo5ZnIrSTFIcTkzZzJ5eEg0aXdNMXZrb0JXQWR4Q21welR4ZmtOMlJjeVpOYUhGSWtTbzEwKzhrZ3hrWElVUlY1SEd4VG1GdWM3NUIyUmZRa3B4SEc4YUFnYUFGYTB0QUhxWUZmUTdJd2UyeWhPRGs4K0o0Qzd5QW9SVFdJM3cvNGtsR1JnUjRsTzdScG45K2d2TXlXcCt1eEZoOCtIK0FSbGdOMW5KdUp1UUFZdk5rRW53R0ZjazE4RXI0cTNlZ0VjL29PK21oTGRLZ1J5aGRORmlhY0MwcmxPQ2JoTlZ6NEg5Rm5BWWdEQnZVM1FJaW9abEpGTEp0c29IWVJEZmlab1V5SXhxQ3RScFZsQU5xMEVVNGRBcGpydGdlelBGYWQ1UzE5V2dqa2MwaE5WbnVGNEhqVkE2QzdRclNJYnlsQitvWmUzYUhnQnNxbE5xS1lINDhqWHlKS011QWJpeVZKOEt6YUIzZVJjMHBnOVZ3UTRuaUZyeUk2OHFpT2kzQWJqd2RzZm5BdGswYkNqVExKS3I2bXJEOWc4aXEvUy9CODFoZ3VPTWxRVG5WeUc0MHdBY2pubWdzQ05FU0Ryam1lN3dmZnRQNFA3U1A0TjNDSlpkdnpvTnlHcTJjL0hXT1hKR3N2VmcrUkEvazJNQy93TjZJMllBMlB0OEdrQUFBQUFTVVZPUks1Q1lJST0pIWltcG9ydGFudH0jdG9hc3RyLWNvbnRhaW5lcj4udG9hc3RyLXN1Y2Nlc3N7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzTUFBQTdEQWNkdnFHUUFBQURzU1VSQlZFaExZMkFZQmZRTWdmLy8vM1A4Ky9ldkFJZ3ZBL0ZzSUYrQmF2WUREV01CR3JvYVNNTUJpRThWQzdBWkRySUZhTUZuaWkzQVpUalVnc1VVV1VEQThPZEFINmlRYlFFaHc0SHlHc1BFY0tCWEJJQzRBUmhleDRHNEJzam13ZVUxc29JRmFHZy9XdG9GWlJJWmRFdklNaHhrQ0NqWElWc0FUVjZnRkdBQ3M0UnN3MEVHZ0lJSDNRSllKZ0hTQVJRWkRyV0FCK2phd3pncytRMlVPNDlEN2puUlNSR29FRlJJTGNkbUVNV0dJMGNtMEpKMlFwWUExUkR2Y216SkVXaEFCaEQvcHFyTDBTMENXdUFCS2duUmtpOWxMc2VTN2cyQWxxd0hXUVNLSDRvS0xySUxwUkdoRVFDdzJMaVJVSWE0bHdBQUFBQkpSVTVFcmtKZ2dnPT0pIWltcG9ydGFudH0jdG9hc3RyLWNvbnRhaW5lcj4udG9hc3RyLXdhcm5pbmd7YmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCZ0FBQUFZQ0FZQUFBRGdkejM0QUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzTUFBQTdEQWNkdnFHUUFBQUdZU1VSQlZFaEw1WlN2VHNOUUZNYlhaR0lDTVlHWW1KaEFRSUpBSUNZUVBBQUNpU0RCOEFpSUNRUUpUNENxUUV3Z0p2WUFTQVFDaVppWW1KaEFJQkFUQ0FSSnkrOXJUc2xkZDhzS3UxTTArZExiMDU3djYvbGJxLzJySzBtUy9UUk5qOWNXTkFLUFlJSklJN2dJeENjUTUxY3ZxSUQrR0lFWDhBU0c0QjFiSzVnSVpGZVFmb0pkRVhPZmdYNFFBUWc3a0gyQTY1eVE4N2x5eGIyN3NnZ2tBekF1RmhiYmcxSzJrZ0NrQjFiVnd5SVI5bTJMN1BSUEloRFVJWGdHdHlLdzU3NXl6M2xUTnM2WDRKWG5qVitMS00vbTNNeWRuVGJ0T0tJanR6NlZoQ0JxNHZTbTNuY2RyRDJsazBWZ1VYU1ZLalZESlhKemlqVzFSUWRzVTdGNzdIZTh1Njhrb05aVHo4T3o1eUdhNkozSDNsWjB4WWdYQksyUXltbFdXQStSV25ZaHNrTEJ2MnZtRStoQk1DdGJBN0tYNWRyV3lSVC8ySnNxWjJJdmZCOVk0YldETk1GYkpSRm1DOUU3NFNvUzBDcXVsd2prQzArNWJwY1YxQ1o4Tk1lajRwankwVStkb0RRc0d5bzFoelZKdHRJamhRN0duQnRSRk4xVWFyVWxIOEYzeGljdCtIWTA3ckV6b1VHUGxXY2pSRlJyNC9nQ2haZ2MzWkwyZDhvQUFBQUFTVVZPUks1Q1lJST0pIWltcG9ydGFudH0jdG9hc3RyLWNvbnRhaW5lci5ib3R0b20tY2VudGVyPmRpdiwjdG9hc3RyLWNvbnRhaW5lci50b3AtY2VudGVyPmRpdnt3aWR0aDozMDBweDttYXJnaW46MTBweCBhdXRvfSN0b2FzdHItY29udGFpbmVyLmJvdHRvbS1mdWxsLXdpZHRoPmRpdiwjdG9hc3RyLWNvbnRhaW5lci50b3AtZnVsbC13aWR0aD5kaXZ7d2lkdGg6OTYlO21hcmdpbjoxMHB4IGF1dG99LnRvYXN0cntiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LnRvYXN0ci1zdWNjZXNze2JhY2tncm91bmQtY29sb3I6IzUxYTM1MX0udG9hc3RyLWVycm9ye2JhY2tncm91bmQtY29sb3I6I2Q5NTM0Zn0udG9hc3RyLWluZm97YmFja2dyb3VuZC1jb2xvcjojNzQ2MGVlfS50b2FzdHItd2FybmluZ3tiYWNrZ3JvdW5kLWNvbG9yOiNmODk0MDZ9LnRvYXN0ci1wcm9ncmVzc3twb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7Ym90dG9tOjA7aGVpZ2h0OjRweDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7b3BhY2l0eTouNH1AbWVkaWEgYWxsIGFuZCAobWF4LXdpZHRoOjI0MHB4KXsjdG9hc3RyLWNvbnRhaW5lcj5kaXZ7cGFkZGluZzo4cHggOHB4IDhweCA1MHB4O3dpZHRoOjExZW19I3RvYXN0ci1jb250YWluZXIgLnRvYXN0ci1jbG9zZS1idXR0b257cmlnaHQ6LS4yZW07dG9wOi0uMmVtfX1AbWVkaWEgYWxsIGFuZCAobWluLXdpZHRoOjI0MXB4KSBhbmQgKG1heC13aWR0aDo0ODBweCl7I3RvYXN0ci1jb250YWluZXI+ZGl2e3BhZGRpbmc6OHB4IDhweCA4cHggNTBweDt3aWR0aDoxOGVtfSN0b2FzdHItY29udGFpbmVyIC50b2FzdHItY2xvc2UtYnV0dG9ue3JpZ2h0Oi0uMmVtO3RvcDotLjJlbX19QG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDo0ODFweCkgYW5kIChtYXgtd2lkdGg6NzY4cHgpeyN0b2FzdHItY29udGFpbmVyPmRpdntwYWRkaW5nOjE1cHggMTVweCAxNXB4IDUwcHg7d2lkdGg6MjVlbX19YF0sXG4gIGFuaW1hdGlvbnM6IFtUb2FzdHJBbmltYXRpb25zXVxufSlcbmV4cG9ydCBjbGFzcyBUb2FzdHJDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBtZXNzYWdlQ2xhc3M6IHN0cmluZztcbiAgdGl0bGVDbGFzczogc3RyaW5nO1xuICBwb3NpdGlvbjogc3RyaW5nO1xuICBtYXhTaG93bjogbnVtYmVyO1xuICBuZXdlc3RPblRvcDogYm9vbGVhbjtcbiAgYW5pbWF0ZTogc3RyaW5nO1xuICB0b2FzdHJzOiBUb2FzdHJbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2ZyZXNoOiBib29sZWFuID0gdHJ1ZTtcbiAgcHVibGljIG9uVG9hc3RDbGlja2VkOiAodG9hc3Q6IFRvYXN0cikgPT4gdm9pZDtcblxuICBwcml2YXRlIF9vbkVudGVyOiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpO1xuICBwcml2YXRlIF9vbkV4aXQ6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHNhbml0aXplcjogRG9tU2FuaXRpemVyLFxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIF96b25lOiBOZ1pvbmUsXG4gICAgb3B0aW9uczogVG9hc3RyT3B0aW9uc1xuICApIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMpO1xuICB9XG5cbiAgb25FbnRlcigpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5fb25FbnRlci5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIG9uRXhpdCgpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5fb25FeGl0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgYWRkVG9hc3RyKHRvYXN0OiBUb2FzdHIpIHtcbiAgICBpZiAodGhpcy5wb3NpdGlvbi5pbmRleE9mKFwidG9wXCIpID4gMCkge1xuICAgICAgaWYgKHRoaXMubmV3ZXN0T25Ub3ApIHtcbiAgICAgICAgdGhpcy50b2FzdHJzLnVuc2hpZnQodG9hc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50b2FzdHJzLnB1c2godG9hc3QpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50b2FzdHJzLmxlbmd0aCA+IHRoaXMubWF4U2hvd24pIHtcbiAgICAgICAgY29uc3QgZGlmZiA9IHRoaXMudG9hc3Rycy5sZW5ndGggLSB0aGlzLm1heFNob3duO1xuXG4gICAgICAgIGlmICh0aGlzLm5ld2VzdE9uVG9wKSB7XG4gICAgICAgICAgdGhpcy50b2FzdHJzLnNwbGljZSh0aGlzLm1heFNob3duKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRvYXN0cnMuc3BsaWNlKDAsIGRpZmYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9hc3Rycy51bnNoaWZ0KHRvYXN0KTtcbiAgICAgIGlmICh0aGlzLnRvYXN0cnMubGVuZ3RoID4gdGhpcy5tYXhTaG93bikge1xuICAgICAgICB0aGlzLnRvYXN0cnMuc3BsaWNlKHRoaXMubWF4U2hvd24pO1xuICAgICAgfVxuICAgIH0gICAgXG5cbiAgICBpZiAodGhpcy5hbmltYXRlID09PSBudWxsICYmIHRoaXMuX2ZyZXNoKSB7XG4gICAgICB0aGlzLl9mcmVzaCA9IGZhbHNlO1xuICAgICAgdGhpcy5fb25FbnRlci5uZXh0KCk7XG4gICAgICB0aGlzLl9vbkVudGVyLmNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgcmVtb3ZlVG9hc3RyKHRvYXN0OiBUb2FzdHIpIHtcbiAgICBpZiAodG9hc3QudGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodG9hc3QudGltZW91dElkKTtcbiAgICAgIHRvYXN0LnRpbWVvdXRJZCA9IG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy50b2FzdHJzID0gdGhpcy50b2FzdHJzLmZpbHRlcih0ID0+IHtcbiAgICAgIHJldHVybiB0LmlkICE9PSB0b2FzdC5pZDtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUFsbFRvYXN0cygpIHtcbiAgICB0aGlzLnRvYXN0cnMuZm9yRWFjaCgodG9hc3Q6IFRvYXN0cikgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHRvYXN0LnRpbWVvdXRJZCk7XG4gICAgICB0b2FzdC50aW1lb3V0SWQgPSBudWxsO1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMudG9hc3RycyA9IFtdO1xuICB9XG5cbiAgY2xpY2tlZCh0b2FzdDogVG9hc3RyKSB7XG4gICAgaWYgKHRoaXMub25Ub2FzdENsaWNrZWQpIHtcbiAgICAgIHRoaXMub25Ub2FzdENsaWNrZWQodG9hc3QpO1xuICAgIH1cbiAgfVxuXG4gIGFueVRvYXN0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRvYXN0cnMubGVuZ3RoID4gMDtcbiAgfVxuXG4gIGZpbmRUb2FzdCh0b2FzdElkOiBudW1iZXIpOiBUb2FzdHIgfCB2b2lkIHtcbiAgICBmb3IgKGxldCB0b2FzdCBvZiB0aGlzLnRvYXN0cnMpIHtcbiAgICAgIGlmICh0b2FzdC5pZCA9PT0gdG9hc3RJZCkge1xuICAgICAgICByZXR1cm4gdG9hc3Q7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgb25BbmltYXRpb25FbmQoZXZlbnQ6IEFuaW1hdGlvbkV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRvU3RhdGUgPT09IFwidm9pZFwiICYmICF0aGlzLmFueVRvYXN0KCkpIHtcbiAgICAgIHRoaXMuX25nRXhpdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fZnJlc2ggJiYgZXZlbnQuZnJvbVN0YXRlID09PSBcInZvaWRcIikge1xuICAgICAgLy8gbm90aWZ5IHdoZW4gZmlyc3QgYW5pbWF0aW9uIGlzIGRvbmVcbiAgICAgIHRoaXMuX2ZyZXNoID0gZmFsc2U7XG4gICAgICB0aGlzLl96b25lLnJ1bigoKSA9PiB7XG4gICAgICAgIHRoaXMuX29uRW50ZXIubmV4dCgpO1xuICAgICAgICB0aGlzLl9vbkVudGVyLmNvbXBsZXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9uZ0V4aXQoKSB7XG4gICAgdGhpcy5fem9uZS5vbk1pY3JvdGFza0VtcHR5LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLl9vbkV4aXQubmV4dCgpO1xuICAgICAgdGhpcy5fb25FeGl0LmNvbXBsZXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLl9uZ0V4aXQoKTtcbiAgfVxufVxuIiwiLy8gQ29yZVxuaW1wb3J0IHtcbiAgSW5qZWN0YWJsZSxcbiAgQXBwbGljYXRpb25SZWYsXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgSW5qZWN0b3IsXG4gIENvbXBvbmVudFJlZixcbiAgUmVmbGVjdGl2ZUluamVjdG9yLFxuICBQcm92aWRlcixcbiAgVHlwZSxcbiAgTmdab25lXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcblxuLy8gQ29uZmlnXG5pbXBvcnQgeyBUb2FzdHJPcHRpb25zIH0gZnJvbSBcIi4vdG9hc3RyLm9wdGlvbnNcIjtcbmltcG9ydCB7IFRvYXN0ciB9IGZyb20gXCIuL3RvYXN0clwiO1xuXG4vLyBDb21wb25lbnRcbmltcG9ydCB7IFRvYXN0ckNvbXBvbmVudCB9IGZyb20gXCIuL3RvYXN0ci5jb21wb25lbnRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJSW1wbGljaXRDb250ZXh0PFQ+IHtcbiAgJGltcGxpY2l0PzogVDtcbn1cblxuZGVjbGFyZSB2YXIgZG9jdW1lbnQ7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBUb2FzdHJNYW5hZ2VyIHtcbiAgdG9hc3RyQ29udGFpbmVyczogQXJyYXk8YW55PiA9IFtdO1xuXG4gIHByaXZhdGUgaW5kZXggPSAwO1xuICBwcml2YXRlIHRvYXN0Q2xpY2tlZDogU3ViamVjdDxUb2FzdHI+ID0gbmV3IFN1YmplY3Q8VG9hc3RyPigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2FwcGxpY2F0aW9uUmVmOiBBcHBsaWNhdGlvblJlZixcbiAgICBwcml2YXRlIF9jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIF9pbmplY3RvcjogSW5qZWN0b3IsXG4gICAgcHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSxcbiAgICBwcml2YXRlIG9wdGlvbnM6IFRvYXN0ck9wdGlvbnNcbiAgKSB7fVxuXG4gIC8vIENyZWF0ZSBUb2FzdHIgQ29tcG9uZW50XG4gIHByaXZhdGUgY3JlYXRlVG9hc3RyQ29tcG9uZW50PFQ+KHR5cGU6IFR5cGU8VD4sIHByb3ZpZGVyczogYW55ID0gW10pOiBDb21wb25lbnRSZWY8VD4ge1xuICAgIC8vIFJlc29sdmUgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBjb21wb25lbnRzIG9mIHR5cGUgYHR5cGVgLlxuICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLl9jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkodHlwZSBhcyBUeXBlPFQ+KTtcbiAgICAvLyBSZXNvbHZlIGFuZCBjcmVhdGUgYW4gaW5qZWN0b3Igd2l0aCB0aGUgc3BlY2lmaWVkIHByb3ZpZGVycy5cbiAgICBjb25zdCBfcHJvdmlkZXJzID0gUmVmbGVjdGl2ZUluamVjdG9yLnJlc29sdmUocHJvdmlkZXJzKTtcbiAgICBjb25zdCBpbmplY3RvciA9IFJlZmxlY3RpdmVJbmplY3Rvci5mcm9tUmVzb2x2ZWRQcm92aWRlcnMoX3Byb3ZpZGVycywgdGhpcy5faW5qZWN0b3IpO1xuICAgIC8vIENyZWF0ZSBuZXcgbm9kZSBmb3IgaW5zZXJ0aW5nIGludG8gZG9jdW1lbnQuXG4gICAgbGV0IG5ld05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld05vZGUuaWQgPSBcInRvYXN0ci1ub2RlLVwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjAwKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5hcHBlbmRDaGlsZChuZXdOb2RlKTtcbiAgICAvLyBDcmVhdGUgYSBjb21wb25lbnQgdXNpbmcgdGhlIHByZXZpb3VzbHkgcmVzb2x2ZWQgZmFjdG9yeSAmIGluamVjdG9yLlxuICAgIGNvbnN0IGNvbXBvbmVudFJlZiA9IGZhY3RvcnkuY3JlYXRlKGluamVjdG9yLCBbXSwgbmV3Tm9kZSk7XG4gICAgLy8gSW5zZXJ0IG5ldyBjb21wb25lbnQgbm9kZSBpbnRvIGRvY3VtZW50IGJvZHkuXG4gICAgdGhpcy5hdHRhY2hUb0FwcGxpY2F0aW9uKGNvbXBvbmVudFJlZik7XG4gICAgcmV0dXJuIGNvbXBvbmVudFJlZjtcbiAgfVxuXG4gIC8vIEluc2VydHMgdGhlIGNvbXBvbmVudCBpbiB0aGUgcm9vdCBhcHBsaWNhdGlvbiBub2RlLlxuICBwcml2YXRlIGF0dGFjaFRvQXBwbGljYXRpb248VD4oY29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8VD4pOiB2b2lkIHtcbiAgICB0aGlzLl9hcHBsaWNhdGlvblJlZi5hdHRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG4gIH1cblxuICAvLyBEZXRhY2hlcyB0aGUgY29tcG9uZW50IGZyb20gdGhlIHJvb3QgYXBwbGljYXRpb24gbm9kZS5cbiAgcHJpdmF0ZSBkZXRhY2hGcm9tQXBwbGljYXRpb248VD4oY29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8VD4pOiB2b2lkIHtcbiAgICB0aGlzLl9hcHBsaWNhdGlvblJlZi5kZXRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG4gIH1cblxuICBwcml2YXRlIGlzVG9hc3RyQ29udGFpbmVyRXhpc3QocG9zaXRpb246IGFueSkge1xuICAgIGlmICh0aGlzLnRvYXN0ckNvbnRhaW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaSA9IHRoaXMudG9hc3RyQ29udGFpbmVycy5maW5kSW5kZXgoeCA9PiB4LnBvc2l0aW9uID09PSBwb3NpdGlvbik7XG4gICAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VG9hc3RyQ29tcG9uZW50UmVmKHBvc2l0aW9uOiBhbnkpIHtcbiAgICBpZiAodGhpcy50b2FzdHJDb250YWluZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMudG9hc3RyQ29udGFpbmVycy5maW5kKHggPT4geC5wb3NpdGlvbiA9PT0gcG9zaXRpb24pO1xuICAgICAgcmV0dXJuIGNvbnRhaW5lciA/IGNvbnRhaW5lci5yZWYgOiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY3JlYXRlVGltZW91dCh0b2FzdDogVG9hc3RyKTogYW55IHtcbiAgICBsZXQgdGFzazogbnVtYmVyO1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRhc2sgPSBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB0aGlzLm5nWm9uZS5ydW4oKCkgPT4gdGhpcy5jbGVhclRvYXN0KHRvYXN0KSksXG4gICAgICAgIHRvYXN0LmNvbmZpZy50b2FzdFRpbWVvdXRcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGFzay50b1N0cmluZygpO1xuICB9XG5cbiAgc2V0dXBUb2FzdCh0b2FzdDogVG9hc3RyLCBvcHRpb25zPzogYW55KTogVG9hc3RyIHtcbiAgICB0b2FzdC5pZCA9ICsrdGhpcy5pbmRleDtcblxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJ0b2FzdFRpbWVvdXRcIikpIHtcbiAgICAgIG9wdGlvbnMuZGlzbWlzcyA9IFwiYXV0b1wiO1xuICAgIH1cblxuICAgIGNvbnN0IGN1c3RvbUNvbmZpZzogYW55ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcblxuICAgIE9iamVjdC5rZXlzKHRvYXN0LmNvbmZpZykuZm9yRWFjaChrID0+IHtcbiAgICAgIGlmIChjdXN0b21Db25maWcuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgdG9hc3QuY29uZmlnW2tdID0gY3VzdG9tQ29uZmlnW2tdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRvYXN0LmNvbmZpZy5kaXNtaXNzID09PSBcImF1dG9cIikge1xuICAgICAgdG9hc3QudGltZW91dElkID0gdGhpcy5jcmVhdGVUaW1lb3V0KHRvYXN0KTtcbiAgICB9XG5cbiAgICB0b2FzdC50b2FzdHJNYW5hZ2VyID0gdGhpczsgLy8gYmluZCBUb2FzdHJNYW5hZ2VyIGluc3RhbmNlIHRvIFRvYXN0clxuXG4gICAgY29uc3QgcG9zaXRpb24gPSB0b2FzdC5jb25maWcucG9zaXRpb247XG5cbiAgICBpZiAodGhpcy5pc1RvYXN0ckNvbnRhaW5lckV4aXN0KHBvc2l0aW9uKSkge1xuICAgICAgdGhpcy5nZXRUb2FzdHJDb21wb25lbnRSZWYocG9zaXRpb24pLmluc3RhbmNlLmFkZFRvYXN0cih0b2FzdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvYXN0O1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclRvYXN0KHRvYXN0OiBUb2FzdHIpIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRvYXN0LmNvbmZpZy5wb3NpdGlvbjtcbiAgICBpZiAodGhpcy5pc1RvYXN0ckNvbnRhaW5lckV4aXN0KHBvc2l0aW9uKSkge1xuICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5nZXRUb2FzdHJDb21wb25lbnRSZWYocG9zaXRpb24pLmluc3RhbmNlO1xuICAgICAgaW5zdGFuY2UucmVtb3ZlVG9hc3RyKHRvYXN0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNsZWFyQWxsVG9hc3RzKCkge1xuICAgIGlmICh0aGlzLnRvYXN0ckNvbnRhaW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy50b2FzdHJDb250YWluZXJzLmZvckVhY2goY29tcG9uZW50ID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coY29tcG9uZW50KTtcbiAgICAgICAgY29uc3QgcmVmID0gY29tcG9uZW50LnJlZjtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBjb21wb25lbnQucmVmLmluc3RhbmNlO1xuICAgICAgICBpbnN0YW5jZS5yZW1vdmVBbGxUb2FzdHMoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKHJlZik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3Bvc2UodG9hc3RyQ29tcG9uZW50UmVmOiBDb21wb25lbnRSZWY8VG9hc3RyQ29tcG9uZW50Pikge1xuICAgIGlmICh0b2FzdHJDb21wb25lbnRSZWYpIHtcbiAgICAgIGNvbnN0IGkgPSB0aGlzLnRvYXN0ckNvbnRhaW5lcnMuZmluZEluZGV4KHggPT4geC5wb3NpdGlvbiA9PT0gdG9hc3RyQ29tcG9uZW50UmVmLmluc3RhbmNlLnBvc2l0aW9uKTtcbiAgICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgdGhpcy50b2FzdHJDb250YWluZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGV0YWNoRnJvbUFwcGxpY2F0aW9uKHRvYXN0ckNvbXBvbmVudFJlZik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25Ub2FzdENsaWNrZWQodG9hc3Q6IFRvYXN0cikge1xuICAgIHRoaXMudG9hc3RDbGlja2VkLm5leHQodG9hc3QpO1xuICAgIGlmICh0b2FzdC5jb25maWcuZGlzbWlzcyAhPT0gXCJjb250cm9sbGVkXCIpIHtcbiAgICAgIHRoaXMuY2xlYXJUb2FzdCh0b2FzdCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc21pc3NUb2FzdHIodG9hc3Q6IFRvYXN0cikge1xuICAgIHRoaXMuY2xlYXJUb2FzdCh0b2FzdCk7XG4gIH1cblxuICBwdWJsaWMgZGlzbWlzc0FsbFRvYXN0cigpIHtcbiAgICB0aGlzLmNsZWFyQWxsVG9hc3RzKCk7XG4gIH1cblxuICBwdWJsaWMgb25DbGlja1RvYXN0KCk6IE9ic2VydmFibGU8VG9hc3RyPiB7XG4gICAgcmV0dXJuIHRoaXMudG9hc3RDbGlja2VkLmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgcHVibGljIHNob3dUb2FzdHIodG9hc3RyOiBUb2FzdHIsIG9wdGlvbnM/OiBPYmplY3QpOiBQcm9taXNlPFRvYXN0cj4ge1xuICAgIGNvbnN0IG9wdCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmlzVG9hc3RyQ29udGFpbmVyRXhpc3Qob3B0LnBvc2l0aW9uKSkge1xuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSBbeyBwcm92aWRlOiBUb2FzdHJPcHRpb25zLCB1c2VWYWx1ZTogb3B0IH1dO1xuICAgICAgICBsZXQgdG9hc3RyQ29tcG9uZW50UmVmID0gdGhpcy5jcmVhdGVUb2FzdHJDb21wb25lbnQ8VG9hc3RyQ29tcG9uZW50PihcbiAgICAgICAgICBUb2FzdHJDb21wb25lbnQsXG4gICAgICAgICAgcHJvdmlkZXJzXG4gICAgICAgICk7XG5cbiAgICAgICAgdG9hc3RyQ29tcG9uZW50UmVmLmluc3RhbmNlLm9uVG9hc3RDbGlja2VkID0gKHRvYXN0OiBUb2FzdHIpID0+IHtcbiAgICAgICAgICB0aGlzLl9vblRvYXN0Q2xpY2tlZCh0b2FzdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdG9hc3RyQ29tcG9uZW50UmVmLmluc3RhbmNlLm9uRXhpdCgpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaXNwb3NlKHRvYXN0ckNvbXBvbmVudFJlZik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudG9hc3RyQ29udGFpbmVycy5wdXNoKHtcbiAgICAgICAgICBwb3NpdGlvbjogb3B0LnBvc2l0aW9uLFxuICAgICAgICAgIHJlZjogdG9hc3RyQ29tcG9uZW50UmVmXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXNvbHZlKHRoaXMuc2V0dXBUb2FzdCh0b2FzdHIsIG9wdGlvbnMpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBlcnJvclRvYXN0cihtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nLCBvcHRpb25zPzogYW55KTogVG9hc3RyIHtcbiAgICBjb25zdCBkYXRhID0gb3B0aW9ucyAmJiBvcHRpb25zLmRhdGEgPyBvcHRpb25zLmRhdGEgOiBudWxsO1xuICAgIGNvbnN0IHRvYXN0ID0gbmV3IFRvYXN0cihcImVycm9yXCIsIG1lc3NhZ2UsIHRpdGxlLCBkYXRhKTtcbiAgICB0aGlzLnNob3dUb2FzdHIodG9hc3QsIG9wdGlvbnMpO1xuICAgIHJldHVybiB0b2FzdDtcbiAgfVxuXG4gIHB1YmxpYyBpbmZvVG9hc3RyKG1lc3NhZ2U6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpOiBUb2FzdHIge1xuICAgIGNvbnN0IGRhdGEgPSBvcHRpb25zICYmIG9wdGlvbnMuZGF0YSA/IG9wdGlvbnMuZGF0YSA6IG51bGw7XG4gICAgY29uc3QgdG9hc3QgPSBuZXcgVG9hc3RyKFwiaW5mb1wiLCBtZXNzYWdlLCB0aXRsZSwgZGF0YSk7XG4gICAgdGhpcy5zaG93VG9hc3RyKHRvYXN0LCBvcHRpb25zKTtcbiAgICByZXR1cm4gdG9hc3Q7XG4gIH1cblxuICBwdWJsaWMgc3VjY2Vzc1RvYXN0cihtZXNzYWdlOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nLCBvcHRpb25zPzogYW55KTogVG9hc3RyIHtcbiAgICBjb25zdCBkYXRhID0gb3B0aW9ucyAmJiBvcHRpb25zLmRhdGEgPyBvcHRpb25zLmRhdGEgOiBudWxsO1xuICAgIGNvbnN0IHRvYXN0ID0gbmV3IFRvYXN0cihcInN1Y2Nlc3NcIiwgbWVzc2FnZSwgdGl0bGUsIGRhdGEpO1xuICAgIHRoaXMuc2hvd1RvYXN0cih0b2FzdCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRvYXN0O1xuICB9XG5cbiAgcHVibGljIHdhcm5pbmdUb2FzdHIobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZywgb3B0aW9ucz86IGFueSk6IFRvYXN0ciB7XG4gICAgY29uc3QgZGF0YSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kYXRhID8gb3B0aW9ucy5kYXRhIDogbnVsbDtcbiAgICBjb25zdCB0b2FzdCA9IG5ldyBUb2FzdHIoXCJ3YXJuaW5nXCIsIG1lc3NhZ2UsIHRpdGxlLCBkYXRhKTtcbiAgICB0aGlzLnNob3dUb2FzdHIodG9hc3QsIG9wdGlvbnMpO1xuICAgIHJldHVybiB0b2FzdDtcbiAgfVxuXG4gIHB1YmxpYyBjdXN0b21Ub2FzdHIobWVzc2FnZTogc3RyaW5nLCB0aXRsZT86IHN0cmluZywgb3B0aW9ucz86IGFueSk6IFRvYXN0ciB7XG4gICAgY29uc3QgZGF0YSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kYXRhID8gb3B0aW9ucy5kYXRhIDogbnVsbDtcbiAgICBjb25zdCB0b2FzdCA9IG5ldyBUb2FzdHIoXCJjdXN0b21cIiwgbWVzc2FnZSwgdGl0bGUsIGRhdGEpO1xuICAgIHRoaXMuc2hvd1RvYXN0cih0b2FzdCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHRvYXN0O1xuICB9XG59XG4iLCIvLyBDb3JlXG5pbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uXCI7XG5cbi8vIFNlcnZpY2VzXG5pbXBvcnQgeyBUb2FzdHJNYW5hZ2VyIH0gZnJvbSBcIi4vdG9hc3RyLnNlcnZpY2VcIjtcbmltcG9ydCB7IFRvYXN0ck9wdGlvbnMgfSBmcm9tIFwiLi90b2FzdHIub3B0aW9uc1wiO1xuXG4vLyBDb21wb25lbnRzXG5pbXBvcnQgeyBUb2FzdHJDb21wb25lbnQgfSBmcm9tIFwiLi90b2FzdHIuY29tcG9uZW50XCI7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxuICBkZWNsYXJhdGlvbnM6IFtUb2FzdHJDb21wb25lbnRdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtUb2FzdHJDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIFRvYXN0ck1vZHVsZSB7XG4gIHN0YXRpYyBmb3JSb290KCk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogVG9hc3RyTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbVG9hc3RyTWFuYWdlciwgVG9hc3RyT3B0aW9uc11cbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiSW5qZWN0YWJsZSIsInRyaWdnZXIiLCJzdGF0ZSIsInN0eWxlIiwidHJhbnNpdGlvbiIsImFuaW1hdGUiLCJTdWJqZWN0IiwidHNsaWJfMS5fX3ZhbHVlcyIsIkNvbXBvbmVudCIsIkRvbVNhbml0aXplciIsIkNoYW5nZURldGVjdG9yUmVmIiwiTmdab25lIiwiUmVmbGVjdGl2ZUluamVjdG9yIiwiQXBwbGljYXRpb25SZWYiLCJDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIiLCJJbmplY3RvciIsIk5nTW9kdWxlIiwiQ29tbW9uTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7UUFlRTs0QkFYbUIsV0FBVzs0QkFDWCxDQUFDOytCQUNHLEtBQUs7MkJBQ1YsZUFBZTtnQ0FDVixJQUFJOzhCQUNMLEtBQUs7MkJBQ1QsTUFBTTtnQ0FDRCxnQkFBZ0I7OEJBQ2xCLGNBQWM7bUNBQ1IsS0FBSztTQUVoQjs7b0JBYmpCQSxlQUFVOzs7OzRCQUZYOzs7Ozs7O0FDR0EsUUFBQTtRQWVFLGdCQUNTLE1BQ0EsU0FDQSxPQUNBO1lBSEEsU0FBSSxHQUFKLElBQUk7WUFDSixZQUFPLEdBQVAsT0FBTztZQUNQLFVBQUssR0FBTCxLQUFLO1lBQ0wsU0FBSSxHQUFKLElBQUk7MEJBaEJDO2dCQUNaLFFBQVEsRUFBRSxFQUFFO2dCQUNaLE9BQU8sRUFBRSxlQUFlO2dCQUN4QixPQUFPLEVBQUUsTUFBTTtnQkFDZixVQUFVLEVBQUUsS0FBSztnQkFDakIsVUFBVSxFQUFFLEVBQUU7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RCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEMsT0FBTyxLQUFLLENBQUM7Ozs7Ozs7O1FBR1Isa0NBQVU7Ozs7OztzQkFBQyxPQUFlLEVBQUUsS0FBYyxFQUFFLE9BQWE7Z0JBQzlELHFCQUFNLElBQUksR0FBRyxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDM0QscUJBQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN2RCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEMsT0FBTyxLQUFLLENBQUM7Ozs7Ozs7O1FBR1IscUNBQWE7Ozs7OztzQkFBQyxPQUFlLEVBQUUsS0FBYyxFQUFFLE9BQWE7Z0JBQ2pFLHFCQUFNLElBQUksR0FBRyxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDM0QscUJBQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEMsT0FBTyxLQUFLLENBQUM7Ozs7Ozs7O1FBR1IscUNBQWE7Ozs7OztzQkFBQyxPQUFlLEVBQUUsS0FBYyxFQUFFLE9BQWE7Z0JBQ2pFLHFCQUFNLElBQUksR0FBRyxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDM0QscUJBQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEMsT0FBTyxLQUFLLENBQUM7Ozs7Ozs7O1FBR1Isb0NBQVk7Ozs7OztzQkFBQyxPQUFlLEVBQUUsS0FBYyxFQUFFLE9BQWE7Z0JBQ2hFLHFCQUFNLElBQUksR0FBRyxPQUFPLElBQUksT0FBTyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDM0QscUJBQU0sS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN6RCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEMsT0FBTyxLQUFLLENBQUM7OztvQkF2TmhCWixlQUFVOzs7Ozt3QkF4QlRhLG1CQUFjO3dCQUNkQyw2QkFBd0I7d0JBQ3hCQyxhQUFRO3dCQUtSSixXQUFNO3dCQUtDLGFBQWE7Ozs0QkFmdEI7Ozs7Ozs7QUNDQTs7Ozs7O1FBZ0JTLG9CQUFPOzs7WUFBZDtnQkFDRSxPQUFPO29CQUNMLFFBQVEsRUFBRSxZQUFZO29CQUN0QixTQUFTLEVBQUUsQ0FBQyxhQUFhLEVBQUUsYUFBYSxDQUFDO2lCQUMxQyxDQUFDO2FBQ0g7O29CQVhGSyxhQUFRLFNBQUM7d0JBQ1IsT0FBTyxFQUFFLENBQUNDLG1CQUFZLENBQUM7d0JBQ3ZCLFlBQVksRUFBRSxDQUFDLGVBQWUsQ0FBQzt3QkFDL0IsZUFBZSxFQUFFLENBQUMsZUFBZSxDQUFDO3FCQUNuQzs7MkJBZkQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7In0=