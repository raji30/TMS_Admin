/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, ChangeDetectorRef, NgZone } from "@angular/core";
import { DomSanitizer } from "@angular/platform-browser";
import { Subject } from "rxjs";
import { ToastrOptions } from "./toastr.options";
import { ToastrAnimations } from "./toastr.animations";
export class ToastrComponent {
    /**
     * @param {?} sanitizer
     * @param {?} cdr
     * @param {?} _zone
     * @param {?} options
     */
    constructor(sanitizer, cdr, _zone, options) {
        this.sanitizer = sanitizer;
        this.cdr = cdr;
        this._zone = _zone;
        this.toastrs = [];
        this._fresh = true;
        this._onEnter = new Subject();
        this._onExit = new Subject();
        Object.assign(this, options);
    }
    /**
     * @return {?}
     */
    onEnter() {
        return this._onEnter.asObservable();
    }
    /**
     * @return {?}
     */
    onExit() {
        return this._onExit.asObservable();
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    addToastr(toast) {
        if (this.position.indexOf("top") > 0) {
            if (this.newestOnTop) {
                this.toastrs.unshift(toast);
            }
            else {
                this.toastrs.push(toast);
            }
            if (this.toastrs.length > this.maxShown) {
                const /** @type {?} */ diff = this.toastrs.length - this.maxShown;
                if (this.newestOnTop) {
                    this.toastrs.splice(this.maxShown);
                }
                else {
                    this.toastrs.splice(0, diff);
                }
            }
        }
        else {
            this.toastrs.unshift(toast);
            if (this.toastrs.length > this.maxShown) {
                this.toastrs.splice(this.maxShown);
            }
        }
        if (this.animate === null && this._fresh) {
            this._fresh = false;
            this._onEnter.next();
            this._onEnter.complete();
        }
        this.cdr.detectChanges();
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    removeToastr(toast) {
        if (toast.timeoutId) {
            clearTimeout(toast.timeoutId);
            toast.timeoutId = null;
        }
        this.toastrs = this.toastrs.filter(t => {
            return t.id !== toast.id;
        });
    }
    /**
     * @return {?}
     */
    removeAllToasts() {
        this.toastrs.forEach((toast) => {
            clearTimeout(toast.timeoutId);
            toast.timeoutId = null;
        });
        this.toastrs = [];
    }
    /**
     * @param {?} toast
     * @return {?}
     */
    clicked(toast) {
        if (this.onToastClicked) {
            this.onToastClicked(toast);
        }
    }
    /**
     * @return {?}
     */
    anyToast() {
        return this.toastrs.length > 0;
    }
    /**
     * @param {?} toastId
     * @return {?}
     */
    findToast(toastId) {
        for (let /** @type {?} */ toast of this.toastrs) {
            if (toast.id === toastId) {
                return toast;
            }
        }
        return null;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onAnimationEnd(event) {
        if (event.toState === "void" && !this.anyToast()) {
            this._ngExit();
        }
        else if (this._fresh && event.fromState === "void") {
            // notify when first animation is done
            this._fresh = false;
            this._zone.run(() => {
                this._onEnter.next();
                this._onEnter.complete();
            });
        }
    }
    /**
     * @return {?}
     */
    _ngExit() {
        this._zone.onMicrotaskEmpty.subscribe(() => {
            this._onExit.next();
            this._onExit.complete();
        });
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this._ngExit();
    }
}
ToastrComponent.decorators = [
    { type: Component, args: [{
                selector: "app-toastr",
                template: `<div #toastrContainer id="toastr-container" class="{{position}}">
  <div *ngFor="let toastr of toastrs" [@inOut]="toastr.config.animate || animate" (@inOut.done)="onAnimationEnd($event)" class="toastr toastr-{{toastr.type}}" 
  (click)="clicked(toastr)">
    <div class="toastr-close-button" *ngIf="toastr.config.showCloseButton" (click)="removeToastr(toastr)">&times;
    </div> 
    <div *ngIf="toastr.title" class="to-title {{toastr.config.titleClass || titleClass}}">{{toastr.title}}</div>
    <div [ngSwitch]="toastr.config.enableHTML">
      <span *ngSwitchCase="true" class="to-message {{toastr.config.messageClass || messageClass}}" [innerHTML]="sanitizer.bypassSecurityTrustHtml(toastr.message)"></span>
      <span *ngSwitchDefault class="to-message {{toastr.config.messageClass || messageClass}}">{{toastr.message}}</span>
    </div>             
  </div>
</div>`,
                styles: [`.to-title{font-weight:700;font-size:16px;margin-bottom:8px;color:#fff}.to-message{word-wrap:break-word;font-size:14px;line-height:20px;display:block;color:#fff;background-color:transparent}.to-message a,.to-message label{color:#fff}.to-message a:hover{color:#ccc;text-decoration:none}.toastr-close-button{position:relative;right:-5px;top:-15px;float:right;font-size:25px;color:#fff;-webkit-text-shadow:0 1px 0 #fff;text-shadow:0 1px 0 #fff;opacity:.8}.toastr-close-button:focus,.toastr-close-button:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.toastr-close-button{padding:0;cursor:pointer;background:0 0;border:0;-webkit-appearance:none}.top-center{top:0;right:0;width:100%}.bottom-center{bottom:0;right:0;width:100%}.top-full-width{top:0;right:0;width:100%}.bottom-full-width{bottom:0;right:0;width:100%}.top-left{top:12px;left:12px}.top-right{top:12px;right:12px}.bottom-right{right:12px;bottom:12px}.bottom-left{bottom:12px;left:12px}#toastr-container{position:fixed;z-index:99999}#toastr-container *{box-sizing:border-box}#toastr-container>div{position:relative;overflow:hidden;margin:10px 0 6px;padding:15px 15px 15px 60px;width:345px;border-radius:3px;background-position:15px;background-repeat:no-repeat;box-shadow:0 0 12px #999;color:#fff;opacity:1}#toastr-container>div.toastr-custom{padding:15px;color:#030303}#toastr-container>div.toastr-custom .toastr-close-button{color:#999!important}#toastr-container>:hover{box-shadow:0 0 12px #000;opacity:1;cursor:pointer}#toastr-container>.toastr-info{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=)!important}#toastr-container>.toastr-error{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=)!important}#toastr-container>.toastr-success{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==)!important}#toastr-container>.toastr-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=)!important}#toastr-container.bottom-center>div,#toastr-container.top-center>div{width:300px;margin:10px auto}#toastr-container.bottom-full-width>div,#toastr-container.top-full-width>div{width:96%;margin:10px auto}.toastr{background-color:#fff}.toastr-success{background-color:#51a351}.toastr-error{background-color:#d9534f}.toastr-info{background-color:#7460ee}.toastr-warning{background-color:#f89406}.toastr-progress{position:absolute;left:0;bottom:0;height:4px;background-color:#000;opacity:.4}@media all and (max-width:240px){#toastr-container>div{padding:8px 8px 8px 50px;width:11em}#toastr-container .toastr-close-button{right:-.2em;top:-.2em}}@media all and (min-width:241px) and (max-width:480px){#toastr-container>div{padding:8px 8px 8px 50px;width:18em}#toastr-container .toastr-close-button{right:-.2em;top:-.2em}}@media all and (min-width:481px) and (max-width:768px){#toastr-container>div{padding:15px 15px 15px 50px;width:25em}}`],
                animations: [ToastrAnimations]
            },] },
];
/** @nocollapse */
ToastrComponent.ctorParameters = () => [
    { type: DomSanitizer },
    { type: ChangeDetectorRef },
    { type: NgZone },
    { type: ToastrOptions }
];
function ToastrComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    ToastrComponent.prototype.messageClass;
    /** @type {?} */
    ToastrComponent.prototype.titleClass;
    /** @type {?} */
    ToastrComponent.prototype.position;
    /** @type {?} */
    ToastrComponent.prototype.maxShown;
    /** @type {?} */
    ToastrComponent.prototype.newestOnTop;
    /** @type {?} */
    ToastrComponent.prototype.animate;
    /** @type {?} */
    ToastrComponent.prototype.toastrs;
    /** @type {?} */
    ToastrComponent.prototype._fresh;
    /** @type {?} */
    ToastrComponent.prototype.onToastClicked;
    /** @type {?} */
    ToastrComponent.prototype._onEnter;
    /** @type {?} */
    ToastrComponent.prototype._onExit;
    /** @type {?} */
    ToastrComponent.prototype.sanitizer;
    /** @type {?} */
    ToastrComponent.prototype.cdr;
    /** @type {?} */
    ToastrComponent.prototype._zone;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9hc3RyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nNi10b2FzdHItbm90aWZpY2F0aW9ucy8iLCJzb3VyY2VzIjpbImxpYi90b2FzdHIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUVoRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDekQsT0FBTyxFQUFjLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUszQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDakQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFtQnZELE1BQU07Ozs7Ozs7SUFlSixZQUNTLFdBQ0MsS0FDQSxPQUNSLE9BQXNCO1FBSGYsY0FBUyxHQUFULFNBQVM7UUFDUixRQUFHLEdBQUgsR0FBRztRQUNILFVBQUssR0FBTCxLQUFLO3VCQVhLLEVBQUU7c0JBRUksSUFBSTt3QkFHRyxJQUFJLE9BQU8sRUFBRTt1QkFDZCxJQUFJLE9BQU8sRUFBRTtRQVEzQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztLQUM5Qjs7OztJQUVELE9BQU87UUFDTCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztLQUNyQzs7OztJQUVELE1BQU07UUFDSixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztLQUNwQzs7Ozs7SUFFRCxTQUFTLENBQUMsS0FBYTtRQUNyQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUM3QjtZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzFCO1lBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLHVCQUFNLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUVqRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztvQkFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2lCQUNwQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDTixJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7aUJBQzlCO2FBQ0Y7U0FDRjtRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDNUIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNwQztTQUNGO1FBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDekMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQzFCO1FBRUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsQ0FBQztLQUMxQjs7Ozs7SUFFRCxZQUFZLENBQUMsS0FBYTtRQUN4QixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNwQixZQUFZLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzlCLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1NBQ3hCO1FBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNyQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsRUFBRSxDQUFDO1NBQzFCLENBQUMsQ0FBQztLQUNKOzs7O0lBRUQsZUFBZTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBYSxFQUFFLEVBQUU7WUFDckMsWUFBWSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM5QixLQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztTQUN4QixDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztLQUNuQjs7Ozs7SUFFRCxPQUFPLENBQUMsS0FBYTtRQUNuQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzVCO0tBQ0Y7Ozs7SUFFRCxRQUFRO1FBQ04sTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztLQUNoQzs7Ozs7SUFFRCxTQUFTLENBQUMsT0FBZTtRQUN2QixHQUFHLENBQUMsQ0FBQyxxQkFBSSxLQUFLLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDL0IsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUN6QixNQUFNLENBQUMsS0FBSyxDQUFDO2FBQ2Q7U0FDRjtRQUNELE1BQU0sQ0FBQyxJQUFJLENBQUM7S0FDYjs7Ozs7SUFFRCxjQUFjLENBQUMsS0FBcUI7UUFDbEMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sS0FBSyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNoQjtRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxTQUFTLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQzs7WUFFckQsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO2dCQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO2FBQzFCLENBQUMsQ0FBQztTQUNKO0tBQ0Y7Ozs7SUFFTyxPQUFPO1FBQ2IsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ3pDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUN6QixDQUFDLENBQUM7Ozs7O0lBR0wsV0FBVztRQUNULElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztLQUNoQjs7O1lBL0lGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsWUFBWTtnQkFDdEIsUUFBUSxFQUFFOzs7Ozs7Ozs7OztPQVdMO2dCQUNMLE1BQU0sRUFBRSxDQUFDLG15S0FBbXlLLENBQUM7Z0JBQzd5SyxVQUFVLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQzthQUMvQjs7OztZQXpCUSxZQUFZO1lBRkQsaUJBQWlCO1lBQUUsTUFBTTtZQVFwQyxhQUFhIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29yZVxuaW1wb3J0IHsgQ29tcG9uZW50LCBDaGFuZ2VEZXRlY3RvclJlZiwgTmdab25lLCBPbkRlc3Ryb3kgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQW5pbWF0aW9uRXZlbnQgfSBmcm9tIFwiQGFuZ3VsYXIvYW5pbWF0aW9uc1wiO1xuaW1wb3J0IHsgRG9tU2FuaXRpemVyIH0gZnJvbSBcIkBhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXJcIjtcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcblxuLy8gQ29uZmlnXG5pbXBvcnQgeyBUb2FzdHIgfSBmcm9tIFwiLi90b2FzdHJcIjtcbmltcG9ydCB7IFRvYXN0ck9wdGlvbnMgfSBmcm9tIFwiLi90b2FzdHIub3B0aW9uc1wiO1xuaW1wb3J0IHsgVG9hc3RyQW5pbWF0aW9ucyB9IGZyb20gXCIuL3RvYXN0ci5hbmltYXRpb25zXCI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJhcHAtdG9hc3RyXCIsXG4gIHRlbXBsYXRlOiBgPGRpdiAjdG9hc3RyQ29udGFpbmVyIGlkPVwidG9hc3RyLWNvbnRhaW5lclwiIGNsYXNzPVwie3twb3NpdGlvbn19XCI+XG4gIDxkaXYgKm5nRm9yPVwibGV0IHRvYXN0ciBvZiB0b2FzdHJzXCIgW0Bpbk91dF09XCJ0b2FzdHIuY29uZmlnLmFuaW1hdGUgfHwgYW5pbWF0ZVwiIChAaW5PdXQuZG9uZSk9XCJvbkFuaW1hdGlvbkVuZCgkZXZlbnQpXCIgY2xhc3M9XCJ0b2FzdHIgdG9hc3RyLXt7dG9hc3RyLnR5cGV9fVwiIFxuICAoY2xpY2spPVwiY2xpY2tlZCh0b2FzdHIpXCI+XG4gICAgPGRpdiBjbGFzcz1cInRvYXN0ci1jbG9zZS1idXR0b25cIiAqbmdJZj1cInRvYXN0ci5jb25maWcuc2hvd0Nsb3NlQnV0dG9uXCIgKGNsaWNrKT1cInJlbW92ZVRvYXN0cih0b2FzdHIpXCI+JnRpbWVzO1xuICAgIDwvZGl2PiBcbiAgICA8ZGl2ICpuZ0lmPVwidG9hc3RyLnRpdGxlXCIgY2xhc3M9XCJ0by10aXRsZSB7e3RvYXN0ci5jb25maWcudGl0bGVDbGFzcyB8fCB0aXRsZUNsYXNzfX1cIj57e3RvYXN0ci50aXRsZX19PC9kaXY+XG4gICAgPGRpdiBbbmdTd2l0Y2hdPVwidG9hc3RyLmNvbmZpZy5lbmFibGVIVE1MXCI+XG4gICAgICA8c3BhbiAqbmdTd2l0Y2hDYXNlPVwidHJ1ZVwiIGNsYXNzPVwidG8tbWVzc2FnZSB7e3RvYXN0ci5jb25maWcubWVzc2FnZUNsYXNzIHx8IG1lc3NhZ2VDbGFzc319XCIgW2lubmVySFRNTF09XCJzYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdEh0bWwodG9hc3RyLm1lc3NhZ2UpXCI+PC9zcGFuPlxuICAgICAgPHNwYW4gKm5nU3dpdGNoRGVmYXVsdCBjbGFzcz1cInRvLW1lc3NhZ2Uge3t0b2FzdHIuY29uZmlnLm1lc3NhZ2VDbGFzcyB8fCBtZXNzYWdlQ2xhc3N9fVwiPnt7dG9hc3RyLm1lc3NhZ2V9fTwvc3Bhbj5cbiAgICA8L2Rpdj4gICAgICAgICAgICAgXG4gIDwvZGl2PlxuPC9kaXY+YCxcbiAgc3R5bGVzOiBbYC50by10aXRsZXtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOjE2cHg7bWFyZ2luLWJvdHRvbTo4cHg7Y29sb3I6I2ZmZn0udG8tbWVzc2FnZXt3b3JkLXdyYXA6YnJlYWstd29yZDtmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoyMHB4O2Rpc3BsYXk6YmxvY2s7Y29sb3I6I2ZmZjtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS50by1tZXNzYWdlIGEsLnRvLW1lc3NhZ2UgbGFiZWx7Y29sb3I6I2ZmZn0udG8tbWVzc2FnZSBhOmhvdmVye2NvbG9yOiNjY2M7dGV4dC1kZWNvcmF0aW9uOm5vbmV9LnRvYXN0ci1jbG9zZS1idXR0b257cG9zaXRpb246cmVsYXRpdmU7cmlnaHQ6LTVweDt0b3A6LTE1cHg7ZmxvYXQ6cmlnaHQ7Zm9udC1zaXplOjI1cHg7Y29sb3I6I2ZmZjstd2Via2l0LXRleHQtc2hhZG93OjAgMXB4IDAgI2ZmZjt0ZXh0LXNoYWRvdzowIDFweCAwICNmZmY7b3BhY2l0eTouOH0udG9hc3RyLWNsb3NlLWJ1dHRvbjpmb2N1cywudG9hc3RyLWNsb3NlLWJ1dHRvbjpob3Zlcntjb2xvcjojMDAwO3RleHQtZGVjb3JhdGlvbjpub25lO2N1cnNvcjpwb2ludGVyO29wYWNpdHk6LjR9YnV0dG9uLnRvYXN0ci1jbG9zZS1idXR0b257cGFkZGluZzowO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MCAwO2JvcmRlcjowOy13ZWJraXQtYXBwZWFyYW5jZTpub25lfS50b3AtY2VudGVye3RvcDowO3JpZ2h0OjA7d2lkdGg6MTAwJX0uYm90dG9tLWNlbnRlcntib3R0b206MDtyaWdodDowO3dpZHRoOjEwMCV9LnRvcC1mdWxsLXdpZHRoe3RvcDowO3JpZ2h0OjA7d2lkdGg6MTAwJX0uYm90dG9tLWZ1bGwtd2lkdGh7Ym90dG9tOjA7cmlnaHQ6MDt3aWR0aDoxMDAlfS50b3AtbGVmdHt0b3A6MTJweDtsZWZ0OjEycHh9LnRvcC1yaWdodHt0b3A6MTJweDtyaWdodDoxMnB4fS5ib3R0b20tcmlnaHR7cmlnaHQ6MTJweDtib3R0b206MTJweH0uYm90dG9tLWxlZnR7Ym90dG9tOjEycHg7bGVmdDoxMnB4fSN0b2FzdHItY29udGFpbmVye3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6OTk5OTl9I3RvYXN0ci1jb250YWluZXIgKntib3gtc2l6aW5nOmJvcmRlci1ib3h9I3RvYXN0ci1jb250YWluZXI+ZGl2e3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjttYXJnaW46MTBweCAwIDZweDtwYWRkaW5nOjE1cHggMTVweCAxNXB4IDYwcHg7d2lkdGg6MzQ1cHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZC1wb3NpdGlvbjoxNXB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtib3gtc2hhZG93OjAgMCAxMnB4ICM5OTk7Y29sb3I6I2ZmZjtvcGFjaXR5OjF9I3RvYXN0ci1jb250YWluZXI+ZGl2LnRvYXN0ci1jdXN0b217cGFkZGluZzoxNXB4O2NvbG9yOiMwMzAzMDN9I3RvYXN0ci1jb250YWluZXI+ZGl2LnRvYXN0ci1jdXN0b20gLnRvYXN0ci1jbG9zZS1idXR0b257Y29sb3I6Izk5OSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXI+OmhvdmVye2JveC1zaGFkb3c6MCAwIDEycHggIzAwMDtvcGFjaXR5OjE7Y3Vyc29yOnBvaW50ZXJ9I3RvYXN0ci1jb250YWluZXI+LnRvYXN0ci1pbmZve2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFHd1NVUkJWRWhMdFphOVNnTkJFTWM5c1V4eFJjb1VLU3pTV0loWHBGTWhoWVdGaGFCZzR5UFlpV0NYWnhCTEVSc0xSUzNFUWtFZndDS2RqV0pBd1NLQ2dvS0NjdWR2NE81WUxydDdFemdYaGlVMy80K2IyY2ttd1ZqSlNwS2tRNndBaTRnd2hUK3ozd1JCY0V6MHlqU3NlVVRyY1J5ZnNIc1htRDBBbWJIT0M5SWk4VkltbnVYQlBnbEhwUTV3d1NWTTdzTm5URzdaYTRKd0RkQ2p4eUFpSDNueUEybXRhVEp1ZmlEWjVkQ2FxbEl0SUxoMU5IYXRmTjVza3ZqeDlaMzhtNjlDZ3p1WG1aZ1ZyUElHRTc2M0p4OXFLc1JveldZdzZ4T0hkRVIrbm4yS2tPK0JiK1VWNUNCTjZXQzZRdEJnYlJWb3pyYWhBYm1tNkh0VXNndFBDMTl0RmR4WFpZQk9ma2JtRkoxVmFIQTFWQUhqZDBwcDcwb1RaenZSK0VWcngyWWdmZHNxNmV1NTVCSFlSOGhsY2tpK24ra0VSVUZHOEJyQTBCd2plQXYyTThXTFFCdGN5K1NENmZOc21uQjNBbEJMcmdUdFZXMWMyUU40YlZXTEFUYUlTNjBKMkR1NXkxVGlKZ2pTQnZGVlpnVG13Q1UrZEFaRm9QeEdFRXM4bnlIQzlCd2UyR3ZFSnYyV1haYjB2amR5RlQ0Q3hrM2Uva0lxbE9Hb1ZMd3dQZXZwWUhUKzAwVCtoV3dYRGY0QUpBT1VxV2NEaGJ3QUFBQUFTVVZPUks1Q1lJST0pIWltcG9ydGFudH0jdG9hc3RyLWNvbnRhaW5lcj4udG9hc3RyLWVycm9ye2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFIT1NVUkJWRWhMclphL1NnTkJFTVp6aDBXS0NDbFNDS2FJWU9FRCtBQUtlUVFMRzhIV3p0TENJbUJyWWFkZ0lkWStnSUtOWWtCRlN3dTdDQW9xQ2dra29HQkkvRTI4UGRiTFptZURMZ3paemN4ODMveloyU1NYQzFqOWZyK0kxSHE5M2cyeXhINGl3TTF2a29CV0FkeENtcHpUeGZrTjJSY3laTmFIRklrU28xMCs4a2d4a1hJVVJWNUhHeFRtRnVjNzVCMlJmUWtweEhHOGFBZ2FBRmEwdEFIcVlGZlE3SXdlMnloT0RrOCtKNEM3eUFvUlRXSTN3LzRrbEdSZ1I0bE83UnBuOStndk15V3ArdXhGaDgrSCtBUmxnTjFuSnVKdVFBWXZOa0Vud0dGY2sxOEVyNHEzZWdFYy9vTyttaExkS2dSeWhkTkZpYWNDMHJsT0NiaE5WejRIOUZuQVlnREJ2VTNRSWlvWmxKRkxKdHNvSFlSRGZpWm9VeUl4cUN0UnBWbEFOcTBFVTRkQXBqcnRnZXpQRmFkNVMxOVdnamtjMGhOVm51RjRIalZBNkM3UXJTSWJ5bEIrb1plM2FIZ0JzcWxOcUtZSDQ4alh5SktNdUFiaXlWSjhLemFCM2VSYzBwZzlWd1E0bmlGcnlJNjhxaU9pM0Fiandkc2ZuQXRrMGJDalRMSktyNm1yRDlnOGlxL1MvQjgxaGd1T01sUVRuVnlHNDB3QWNqbm1nc0NORVNEcmptZTd3ZmZ0UDRQN1NQNE4zQ0paZHZ6b055R3EyYy9IV09YSkdzdlZnK1JBL2syTUMvd042STJZQTJQdDhHa0FBQUFBU1VWT1JLNUNZSUk9KSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXI+LnRvYXN0ci1zdWNjZXNze2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFEc1NVUkJWRWhMWTJBWUJmUU1nZi8vLzNQOCsvZXZBSWd2QS9Gc0lGK0JhdllERFdNQkdyb2FTTU1CaUU4VkM3QVpEcklGYU1GbmlpM0FaVGpVZ3NVVVdVREE4T2RBSDZpUWJRRWh3NEh5R3NQRWNLQlhCSUM0QVJoZXg0RzRCc2ptd2VVMXNvSUZhR2cvV3RvRlpSSVpkRXZJTWh4a0NDalhJVnNBVFY2Z0ZHQUNzNFJzdzBFR2dJSUgzUUpZSmdIU0FSUVpEcldBQitqYXd6Z3MrUTJVTzQ5RDdqblJTUkdvRUZSSUxjZG1FTVdHSTBjbTBKSjJRcFlBMVJEdmNtekpFV2hBQmhEL3BxckwwUzBDV3VBQktnblJraTlsTHNlUzdnMkFscXdIV1FTS0g0b0tMcklMcFJHaEVRQ3cyTGlSVUlhNGx3QUFBQUJKUlU1RXJrSmdnZz09KSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXI+LnRvYXN0ci13YXJuaW5ne2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQmdBQUFBWUNBWUFBQURnZHozNEFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFHWVNVUkJWRWhMNVpTdlRzTlFGTWJYWkdJQ01ZR1ltSmhBUUlKQUlDWVFQQUFDaVNEQjhBaUlDUVFKVDRDcVFFd2dKdllBU0FRQ2laaVltSmhBSUJBVENBUkp5KzlyVHNsZGQ4c0t1MU0wK2RMYjA1N3Y2L2xicS8yckswbVMvVFJOajljV05BS1BZSUpJSTdnSXhDY1E1MWN2cUlEK0dJRVg4QVNHNEIxYks1Z0laRmVRZm9KZEVYT2ZnWDRRQVFnN2tIMkE2NXlRODdseXhiMjdzZ2drQXpBdUZoYmJnMUsya2dDa0IxYlZ3eUlSOW0yTDdQUlBJaERVSVhnR3R5S3c1NzV5ejNsVE5zNlg0SlhualYrTEtNL20zTXlkblRidE9LSWp0ejZWaENCcTR2U20zbmNkckQybGswVmdVWFNWS2pWREpYSnppalcxUlFkc1U3Rjc3SGU4dTY4a29OWlR6OE96NXlHYTZKM0gzbFoweFlnWEJLMlF5bWxXV0ErUlduWWhza0xCdjJ2bUUraEJNQ3RiQTdLWDVkcld5UlQvMkpzcVoySXZmQjlZNGJXRE5NRmJKUkZtQzlFNzRTb1MwQ3F1bHdqa0MwKzVicGNWMUNaOE5NZWo0cGp5MFUrZG9EUXNHeW8xaHpWSnR0SWpoUTdHbkJ0UkZOMVVhclVsSDhGM3hpY3QrSFkwN3JFem9VR1BsV2NqUkZScjQvZ0NoWmdjM1pMMmQ4b0FBQUFBU1VWT1JLNUNZSUk9KSFpbXBvcnRhbnR9I3RvYXN0ci1jb250YWluZXIuYm90dG9tLWNlbnRlcj5kaXYsI3RvYXN0ci1jb250YWluZXIudG9wLWNlbnRlcj5kaXZ7d2lkdGg6MzAwcHg7bWFyZ2luOjEwcHggYXV0b30jdG9hc3RyLWNvbnRhaW5lci5ib3R0b20tZnVsbC13aWR0aD5kaXYsI3RvYXN0ci1jb250YWluZXIudG9wLWZ1bGwtd2lkdGg+ZGl2e3dpZHRoOjk2JTttYXJnaW46MTBweCBhdXRvfS50b2FzdHJ7YmFja2dyb3VuZC1jb2xvcjojZmZmfS50b2FzdHItc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiM1MWEzNTF9LnRvYXN0ci1lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOiNkOTUzNGZ9LnRvYXN0ci1pbmZve2JhY2tncm91bmQtY29sb3I6Izc0NjBlZX0udG9hc3RyLXdhcm5pbmd7YmFja2dyb3VuZC1jb2xvcjojZjg5NDA2fS50b2FzdHItcHJvZ3Jlc3N7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO2JvdHRvbTowO2hlaWdodDo0cHg7YmFja2dyb3VuZC1jb2xvcjojMDAwO29wYWNpdHk6LjR9QG1lZGlhIGFsbCBhbmQgKG1heC13aWR0aDoyNDBweCl7I3RvYXN0ci1jb250YWluZXI+ZGl2e3BhZGRpbmc6OHB4IDhweCA4cHggNTBweDt3aWR0aDoxMWVtfSN0b2FzdHItY29udGFpbmVyIC50b2FzdHItY2xvc2UtYnV0dG9ue3JpZ2h0Oi0uMmVtO3RvcDotLjJlbX19QG1lZGlhIGFsbCBhbmQgKG1pbi13aWR0aDoyNDFweCkgYW5kIChtYXgtd2lkdGg6NDgwcHgpeyN0b2FzdHItY29udGFpbmVyPmRpdntwYWRkaW5nOjhweCA4cHggOHB4IDUwcHg7d2lkdGg6MThlbX0jdG9hc3RyLWNvbnRhaW5lciAudG9hc3RyLWNsb3NlLWJ1dHRvbntyaWdodDotLjJlbTt0b3A6LS4yZW19fUBtZWRpYSBhbGwgYW5kIChtaW4td2lkdGg6NDgxcHgpIGFuZCAobWF4LXdpZHRoOjc2OHB4KXsjdG9hc3RyLWNvbnRhaW5lcj5kaXZ7cGFkZGluZzoxNXB4IDE1cHggMTVweCA1MHB4O3dpZHRoOjI1ZW19fWBdLFxuICBhbmltYXRpb25zOiBbVG9hc3RyQW5pbWF0aW9uc11cbn0pXG5leHBvcnQgY2xhc3MgVG9hc3RyQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcbiAgbWVzc2FnZUNsYXNzOiBzdHJpbmc7XG4gIHRpdGxlQ2xhc3M6IHN0cmluZztcbiAgcG9zaXRpb246IHN0cmluZztcbiAgbWF4U2hvd246IG51bWJlcjtcbiAgbmV3ZXN0T25Ub3A6IGJvb2xlYW47XG4gIGFuaW1hdGU6IHN0cmluZztcbiAgdG9hc3RyczogVG9hc3RyW10gPSBbXTtcblxuICBwcml2YXRlIF9mcmVzaDogYm9vbGVhbiA9IHRydWU7XG4gIHB1YmxpYyBvblRvYXN0Q2xpY2tlZDogKHRvYXN0OiBUb2FzdHIpID0+IHZvaWQ7XG5cbiAgcHJpdmF0ZSBfb25FbnRlcjogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3QoKTtcbiAgcHJpdmF0ZSBfb25FeGl0OiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdCgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzYW5pdGl6ZXI6IERvbVNhbml0aXplcixcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBfem9uZTogTmdab25lLFxuICAgIG9wdGlvbnM6IFRvYXN0ck9wdGlvbnNcbiAgKSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBvcHRpb25zKTtcbiAgfVxuXG4gIG9uRW50ZXIoKTogT2JzZXJ2YWJsZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuX29uRW50ZXIuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICBvbkV4aXQoKTogT2JzZXJ2YWJsZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuX29uRXhpdC5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIGFkZFRvYXN0cih0b2FzdDogVG9hc3RyKSB7XG4gICAgaWYgKHRoaXMucG9zaXRpb24uaW5kZXhPZihcInRvcFwiKSA+IDApIHtcbiAgICAgIGlmICh0aGlzLm5ld2VzdE9uVG9wKSB7XG4gICAgICAgIHRoaXMudG9hc3Rycy51bnNoaWZ0KHRvYXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG9hc3Rycy5wdXNoKHRvYXN0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMudG9hc3Rycy5sZW5ndGggPiB0aGlzLm1heFNob3duKSB7XG4gICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLnRvYXN0cnMubGVuZ3RoIC0gdGhpcy5tYXhTaG93bjtcblxuICAgICAgICBpZiAodGhpcy5uZXdlc3RPblRvcCkge1xuICAgICAgICAgIHRoaXMudG9hc3Rycy5zcGxpY2UodGhpcy5tYXhTaG93bik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50b2FzdHJzLnNwbGljZSgwLCBkaWZmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRvYXN0cnMudW5zaGlmdCh0b2FzdCk7XG4gICAgICBpZiAodGhpcy50b2FzdHJzLmxlbmd0aCA+IHRoaXMubWF4U2hvd24pIHtcbiAgICAgICAgdGhpcy50b2FzdHJzLnNwbGljZSh0aGlzLm1heFNob3duKTtcbiAgICAgIH1cbiAgICB9ICAgIFxuXG4gICAgaWYgKHRoaXMuYW5pbWF0ZSA9PT0gbnVsbCAmJiB0aGlzLl9mcmVzaCkge1xuICAgICAgdGhpcy5fZnJlc2ggPSBmYWxzZTtcbiAgICAgIHRoaXMuX29uRW50ZXIubmV4dCgpO1xuICAgICAgdGhpcy5fb25FbnRlci5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIHJlbW92ZVRvYXN0cih0b2FzdDogVG9hc3RyKSB7XG4gICAgaWYgKHRvYXN0LnRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRvYXN0LnRpbWVvdXRJZCk7XG4gICAgICB0b2FzdC50aW1lb3V0SWQgPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMudG9hc3RycyA9IHRoaXMudG9hc3Rycy5maWx0ZXIodCA9PiB7XG4gICAgICByZXR1cm4gdC5pZCAhPT0gdG9hc3QuaWQ7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVBbGxUb2FzdHMoKSB7XG4gICAgdGhpcy50b2FzdHJzLmZvckVhY2goKHRvYXN0OiBUb2FzdHIpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0b2FzdC50aW1lb3V0SWQpO1xuICAgICAgdG9hc3QudGltZW91dElkID0gbnVsbDtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnRvYXN0cnMgPSBbXTtcbiAgfVxuXG4gIGNsaWNrZWQodG9hc3Q6IFRvYXN0cikge1xuICAgIGlmICh0aGlzLm9uVG9hc3RDbGlja2VkKSB7XG4gICAgICB0aGlzLm9uVG9hc3RDbGlja2VkKHRvYXN0KTtcbiAgICB9XG4gIH1cblxuICBhbnlUb2FzdCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50b2FzdHJzLmxlbmd0aCA+IDA7XG4gIH1cblxuICBmaW5kVG9hc3QodG9hc3RJZDogbnVtYmVyKTogVG9hc3RyIHwgdm9pZCB7XG4gICAgZm9yIChsZXQgdG9hc3Qgb2YgdGhpcy50b2FzdHJzKSB7XG4gICAgICBpZiAodG9hc3QuaWQgPT09IHRvYXN0SWQpIHtcbiAgICAgICAgcmV0dXJuIHRvYXN0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG9uQW5pbWF0aW9uRW5kKGV2ZW50OiBBbmltYXRpb25FdmVudCkge1xuICAgIGlmIChldmVudC50b1N0YXRlID09PSBcInZvaWRcIiAmJiAhdGhpcy5hbnlUb2FzdCgpKSB7XG4gICAgICB0aGlzLl9uZ0V4aXQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2ZyZXNoICYmIGV2ZW50LmZyb21TdGF0ZSA9PT0gXCJ2b2lkXCIpIHtcbiAgICAgIC8vIG5vdGlmeSB3aGVuIGZpcnN0IGFuaW1hdGlvbiBpcyBkb25lXG4gICAgICB0aGlzLl9mcmVzaCA9IGZhbHNlO1xuICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbkVudGVyLm5leHQoKTtcbiAgICAgICAgdGhpcy5fb25FbnRlci5jb21wbGV0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbmdFeGl0KCkge1xuICAgIHRoaXMuX3pvbmUub25NaWNyb3Rhc2tFbXB0eS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5fb25FeGl0Lm5leHQoKTtcbiAgICAgIHRoaXMuX29uRXhpdC5jb21wbGV0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5fbmdFeGl0KCk7XG4gIH1cbn1cbiJdfQ==