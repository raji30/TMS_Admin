{"version":3,"file":"ng2-pdf-viewer.js","sources":["ng://ng2-pdf-viewer/src/app/utils/event-bus-utils.ts","ng://ng2-pdf-viewer/src/app/pdf-viewer/pdf-viewer.component.ts","ng://ng2-pdf-viewer/src/app/pdf-viewer/pdf-viewer.module.ts","ng://ng2-pdf-viewer/ng2-pdf-viewer.ts"],"sourcesContent":["export function _createEventBus(pdfJsViewer: any): any {\n  const globalEventBus = new pdfJsViewer.EventBus(true);\n  attachDOMEventsToEventBus(globalEventBus);\n\n  return globalEventBus;\n}\n\nfunction attachDOMEventsToEventBus(eventBus: any) {\n  eventBus.on('documentload', function() {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('documentload', true, true, {});\n    window.dispatchEvent(event);\n  });\n  eventBus.on('pagerendered', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagerendered', true, true, {\n      pageNumber: evt.pageNumber,\n      cssTransform: evt.cssTransform\n    });\n    evt.source.div.dispatchEvent(event);\n  });\n  eventBus.on('textlayerrendered', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('textlayerrendered', true, true, {\n      pageNumber: evt.pageNumber\n    });\n    evt.source.textLayerDiv.dispatchEvent(event);\n  });\n  eventBus.on('pagechanging', function(evt) {\n    const event = document.createEvent('UIEvents');\n    event.initEvent('pagechanging', true, true);\n    event['pageNumber'] = evt.pageNumber;\n    evt.source.container.dispatchEvent(event);\n  });\n  eventBus.on('pagesinit', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagesinit', true, true, null);\n    evt.source.container.dispatchEvent(event);\n  });\n  eventBus.on('pagesloaded', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagesloaded', true, true, {\n      pagesCount: evt.pagesCount\n    });\n    evt.source.container.dispatchEvent(event);\n  });\n  eventBus.on('scalechange', function(evt) {\n    const event = document.createEvent('UIEvents');\n    event.initEvent('scalechange', true, true);\n    event['scale'] = evt.scale;\n    event['presetValue'] = evt.presetValue;\n    evt.source.container.dispatchEvent(event);\n  });\n  eventBus.on('updateviewarea', function(evt) {\n    const event = document.createEvent('UIEvents');\n    event.initEvent('updateviewarea', true, true);\n    event['location'] = evt.location;\n    evt.source.container.dispatchEvent(event);\n  });\n  eventBus.on('find', function(evt) {\n    if (evt.source === window) {\n      return; // event comes from FirefoxCom, no need to replicate\n    }\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('find' + evt.type, true, true, {\n      query: evt.query,\n      phraseSearch: evt.phraseSearch,\n      caseSensitive: evt.caseSensitive,\n      highlightAll: evt.highlightAll,\n      findPrevious: evt.findPrevious\n    });\n    window.dispatchEvent(event);\n  });\n  eventBus.on('attachmentsloaded', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('attachmentsloaded', true, true, {\n      attachmentsCount: evt.attachmentsCount\n    });\n    evt.source.container.dispatchEvent(event);\n  });\n  eventBus.on('sidebarviewchanged', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('sidebarviewchanged', true, true, {\n      view: evt.view\n    });\n    evt.source.outerContainer.dispatchEvent(event);\n  });\n  eventBus.on('pagemode', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('pagemode', true, true, {\n      mode: evt.mode\n    });\n    evt.source.pdfViewer.container.dispatchEvent(event);\n  });\n  eventBus.on('namedaction', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('namedaction', true, true, {\n      action: evt.action\n    });\n    evt.source.pdfViewer.container.dispatchEvent(event);\n  });\n  eventBus.on('presentationmodechanged', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('presentationmodechanged', true, true, {\n      active: evt.active,\n      switchInProgress: evt.switchInProgress\n    });\n    window.dispatchEvent(event);\n  });\n  eventBus.on('outlineloaded', function(evt) {\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent('outlineloaded', true, true, {\n      outlineCount: evt.outlineCount\n    });\n    evt.source.container.dispatchEvent(event);\n  });\n}\n\nexport const createEventBus = _createEventBus;\n","/**\n * Created by vadimdez on 21/06/16.\n */\nimport {\n  Component,\n  Input,\n  Output,\n  ElementRef,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n  OnInit,\n  HostListener,\n  OnDestroy,\n  ViewChild,\n  AfterViewChecked\n} from '@angular/core';\nimport {\n  PDFDocumentProxy,\n  PDFViewerParams,\n  PDFPageProxy,\n  PDFSource,\n  PDFProgressData,\n  PDFPromise\n} from 'pdfjs-dist';\n\nimport { createEventBus } from '../utils/event-bus-utils';\n\nlet PDFJS: any;\nlet PDFJSViewer: any;\n\nfunction isSSR() {\n  return typeof window === 'undefined';\n}\n\nif (!isSSR()) {\n  PDFJS = require('pdfjs-dist/build/pdf');\n  PDFJSViewer = require('pdfjs-dist/web/pdf_viewer');\n\n  PDFJS.verbosity = PDFJS.VerbosityLevel.ERRORS;\n}\n\nexport enum RenderTextMode {\n  DISABLED,\n  ENABLED,\n  ENHANCED\n}\n\n@Component({\n  selector: 'pdf-viewer',\n  template: `\n    <div #pdfViewerContainer class=\"ng2-pdf-viewer-container\">\n      <div class=\"pdfViewer\"></div>\n    </div>\n  `,\n  styleUrls: ['./pdf-viewer.component.scss']\n})\nexport class PdfViewerComponent\n  implements OnChanges, OnInit, OnDestroy, AfterViewChecked {\n  @ViewChild('pdfViewerContainer') pdfViewerContainer;\n  private isVisible: boolean = false;\n\n  static CSS_UNITS: number = 96.0 / 72.0;\n  static BORDER_WIDTH: number = 9;\n\n  private pdfMultiPageViewer: any;\n  private pdfMultiPageLinkService: any;\n  private pdfMultiPageFindController: any;\n\n  private pdfSinglePageViewer: any;\n  private pdfSinglePageLinkService: any;\n  private pdfSinglePageFindController: any;\n\n  private _cMapsUrl =\n    typeof PDFJS !== 'undefined'\n      ? `https://unpkg.com/pdfjs-dist@${(PDFJS as any).version}/cmaps/`\n      : null;\n  private _renderText = true;\n  private _renderTextMode: RenderTextMode = RenderTextMode.ENABLED;\n  private _stickToPage = false;\n  private _originalSize = true;\n  private _pdf: PDFDocumentProxy;\n  private _page = 1;\n  private _zoom = 1;\n  private _rotation = 0;\n  private _showAll = true;\n  private _canAutoResize = true;\n  private _fitToPage = false;\n  private _externalLinkTarget = 'blank';\n  private _showBorders = false;\n  private lastLoaded: string | Uint8Array | PDFSource;\n  private _latestScrolledPage: number;\n\n  private resizeTimeout: NodeJS.Timer;\n  private pageScrollTimeout: NodeJS.Timer;\n  private isInitialized = false;\n  private loadingTask: any;\n\n  @Output('after-load-complete') afterLoadComplete = new EventEmitter<\n    PDFDocumentProxy\n  >();\n  @Output('page-rendered') pageRendered = new EventEmitter<CustomEvent>();\n  @Output('text-layer-rendered') textLayerRendered = new EventEmitter<\n    CustomEvent\n  >();\n  @Output('error') onError = new EventEmitter<any>();\n  @Output('on-progress') onProgress = new EventEmitter<PDFProgressData>();\n  @Output() pageChange: EventEmitter<number> = new EventEmitter<number>(true);\n  @Input()\n  src: string | Uint8Array | PDFSource;\n\n  @Input('c-maps-url')\n  set cMapsUrl(cMapsUrl: string) {\n    this._cMapsUrl = cMapsUrl;\n  }\n\n  @Input('page')\n  set page(_page) {\n    _page = parseInt(_page, 10) || 1;\n\n    if (this._pdf) {\n      _page = this.getValidPageNumber(_page);\n    }\n\n    this._page = _page;\n    this.pageChange.emit(_page);\n  }\n\n  @Input('render-text')\n  set renderText(renderText: boolean) {\n    this._renderText = renderText;\n  }\n\n  @Input('render-text-mode')\n  set renderTextMode(renderTextMode: RenderTextMode) {\n    this._renderTextMode = renderTextMode;\n  }\n\n  @Input('original-size')\n  set originalSize(originalSize: boolean) {\n    this._originalSize = originalSize;\n  }\n\n  @Input('show-all')\n  set showAll(value: boolean) {\n    this._showAll = value;\n  }\n\n  @Input('stick-to-page')\n  set stickToPage(value: boolean) {\n    this._stickToPage = value;\n  }\n\n  @Input('zoom')\n  set zoom(value: number) {\n    if (value <= 0) {\n      return;\n    }\n\n    this._zoom = value;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  @Input('rotation')\n  set rotation(value: number) {\n    if (!(typeof value === 'number' && value % 90 === 0)) {\n      console.warn('Invalid pages rotation angle.');\n      return;\n    }\n\n    this._rotation = value;\n  }\n\n  @Input('external-link-target')\n  set externalLinkTarget(value: string) {\n    this._externalLinkTarget = value;\n  }\n\n  @Input('autoresize')\n  set autoresize(value: boolean) {\n    this._canAutoResize = Boolean(value);\n  }\n\n  @Input('fit-to-page')\n  set fitToPage(value: boolean) {\n    this._fitToPage = Boolean(value);\n  }\n\n  @Input('show-borders')\n  set showBorders(value: boolean) {\n    this._showBorders = Boolean(value);\n  }\n\n  static getLinkTarget(type: string) {\n    switch (type) {\n      case 'blank':\n        return (<any>PDFJS).LinkTarget.BLANK;\n      case 'none':\n        return (<any>PDFJS).LinkTarget.NONE;\n      case 'self':\n        return (<any>PDFJS).LinkTarget.SELF;\n      case 'parent':\n        return (<any>PDFJS).LinkTarget.PARENT;\n      case 'top':\n        return (<any>PDFJS).LinkTarget.TOP;\n    }\n\n    return null;\n  }\n\n  static setExternalLinkTarget(type: string) {\n    const linkTarget = PdfViewerComponent.getLinkTarget(type);\n\n    if (linkTarget !== null) {\n      (<any>PDFJS).externalLinkTarget = linkTarget;\n    }\n  }\n\n  constructor(private element: ElementRef) {\n    if (isSSR()) {\n      return;\n    }\n\n    let pdfWorkerSrc: string;\n\n    if (\n      window.hasOwnProperty('pdfWorkerSrc') &&\n      typeof (window as any).pdfWorkerSrc === 'string' &&\n      (window as any).pdfWorkerSrc\n    ) {\n      pdfWorkerSrc = (window as any).pdfWorkerSrc;\n    } else {\n      pdfWorkerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${\n        (PDFJS as any).version\n      }/pdf.worker.min.js`;\n    }\n\n    (PDFJS as any).GlobalWorkerOptions.workerSrc = pdfWorkerSrc;\n  }\n\n  ngAfterViewChecked(): void {\n    if (this.isInitialized) {\n      return;\n    }\n\n    const offset = this.pdfViewerContainer.nativeElement.offsetParent;\n\n    if (this.isVisible === true && offset == null) {\n      this.isVisible = false;\n      return;\n    }\n\n    if (this.isVisible === false && offset != null) {\n      this.isVisible = true;\n\n      setTimeout(() => {\n        this.ngOnInit();\n        this.ngOnChanges({ src: this.src } as any);\n      });\n    }\n  }\n\n  ngOnInit() {\n    if (!isSSR() && this.isVisible) {\n      this.isInitialized = true;\n      this.setupMultiPageViewer();\n      this.setupSinglePageViewer();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._pdf) {\n      this._pdf.destroy();\n    }\n  }\n\n  @HostListener('window:resize', [])\n  public onPageResize() {\n    if (!this._canAutoResize || !this._pdf) {\n      return;\n    }\n\n    if (this.resizeTimeout) {\n      clearTimeout(this.resizeTimeout);\n    }\n\n    this.resizeTimeout = setTimeout(() => {\n      this.updateSize();\n    }, 100);\n  }\n\n  get pdfLinkService(): any {\n    return this._showAll\n      ? this.pdfMultiPageLinkService\n      : this.pdfSinglePageLinkService;\n  }\n\n  get pdfViewer(): any {\n    return this.getCurrentViewer();\n  }\n\n  get pdfFindController(): any {\n    return this._showAll\n      ? this.pdfMultiPageFindController\n      : this.pdfSinglePageFindController;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (isSSR() || !this.isVisible) {\n      return;\n    }\n\n    if ('src' in changes) {\n      this.loadPDF();\n    } else if (this._pdf) {\n      if ('renderText' in changes) {\n        this.getCurrentViewer().textLayerMode = this._renderText\n          ? this._renderTextMode\n          : RenderTextMode.DISABLED;\n        this.resetPdfDocument();\n      } else if ('showAll' in changes) {\n        this.resetPdfDocument();\n      }\n      if ('page' in changes) {\n        if (changes['page'].currentValue === this._latestScrolledPage) {\n          return;\n        }\n\n        // New form of page changing: The viewer will now jump to the specified page when it is changed.\n        // This behavior is introducedby using the PDFSinglePageViewer\n        this.getCurrentViewer().scrollPageIntoView({ pageNumber: this._page });\n      }\n\n      this.update();\n    }\n  }\n\n  public updateSize() {\n    const currentViewer = this.getCurrentViewer();\n    this._pdf\n      .getPage(currentViewer.currentPageNumber)\n      .then((page: PDFPageProxy) => {\n        const viewportWidth =\n          (page as any).getViewport({\n            scale: this._zoom,\n            rotation: this._rotation\n          }).width * PdfViewerComponent.CSS_UNITS;\n        let scale = this._zoom;\n        let stickToPage = true;\n\n        // Scale the document when it shouldn't be in original size or doesn't fit into the viewport\n        if (\n          !this._originalSize ||\n          (this._fitToPage &&\n            viewportWidth > this.pdfViewerContainer.nativeElement.clientWidth)\n        ) {\n          scale = this.getScale(\n            (page as any).getViewport({ scale: 1, rotation: this._rotation })\n              .width\n          );\n          stickToPage = !this._stickToPage;\n        }\n\n        currentViewer._setScale(scale, stickToPage);\n      });\n  }\n\n  public clear() {\n    if (this.loadingTask && !this.loadingTask.destroyed) {\n      this.loadingTask.destroy();\n    }\n\n    if (this._pdf) {\n      this._pdf.destroy();\n      this._pdf = null;\n      this.pdfMultiPageViewer.setDocument(null);\n      this.pdfSinglePageViewer.setDocument(null);\n\n      this.pdfMultiPageLinkService.setDocument(null, null);\n      this.pdfSinglePageLinkService.setDocument(null, null);\n\n      this.pdfMultiPageFindController.setDocument(null);\n      this.pdfSinglePageFindController.setDocument(null);\n    }\n  }\n\n  private setupMultiPageViewer() {\n    (PDFJS as any).disableTextLayer = !this._renderText;\n\n    PdfViewerComponent.setExternalLinkTarget(this._externalLinkTarget);\n\n    const eventBus = createEventBus(PDFJSViewer);\n\n    eventBus.on('pagerendered', e => {\n      this.pageRendered.emit(e);\n    });\n\n    eventBus.on('pagechanging', e => {\n      if (this.pageScrollTimeout) {\n        clearTimeout(this.pageScrollTimeout);\n      }\n\n      this.pageScrollTimeout = setTimeout(() => {\n        this._latestScrolledPage = e.pageNumber;\n        this.pageChange.emit(e.pageNumber);\n      }, 100);\n    });\n\n    eventBus.on('textlayerrendered', e => {\n      this.textLayerRendered.emit(e);\n    });\n\n    this.pdfMultiPageLinkService = new PDFJSViewer.PDFLinkService({ eventBus });\n    this.pdfMultiPageFindController = new PDFJSViewer.PDFFindController({\n      linkService: this.pdfMultiPageLinkService,\n      eventBus\n    });\n\n    const pdfOptions: PDFViewerParams | any = {\n      eventBus: eventBus,\n      container: this.element.nativeElement.querySelector('div'),\n      removePageBorders: !this._showBorders,\n      linkService: this.pdfMultiPageLinkService,\n      textLayerMode: this._renderText\n        ? this._renderTextMode\n        : RenderTextMode.DISABLED,\n      findController: this.pdfMultiPageFindController\n    };\n\n    this.pdfMultiPageViewer = new PDFJSViewer.PDFViewer(pdfOptions);\n    this.pdfMultiPageLinkService.setViewer(this.pdfMultiPageViewer);\n    this.pdfMultiPageFindController.setDocument(this._pdf);\n  }\n\n  private setupSinglePageViewer() {\n    (PDFJS as any).disableTextLayer = !this._renderText;\n\n    PdfViewerComponent.setExternalLinkTarget(this._externalLinkTarget);\n\n    const eventBus = createEventBus(PDFJSViewer);\n\n    eventBus.on('pagechanging', e => {\n      if (e.pageNumber != this._page) {\n        this.page = e.pageNumber;\n      }\n    });\n\n    eventBus.on('pagerendered', e => {\n      this.pageRendered.emit(e);\n    });\n\n    eventBus.on('textlayerrendered', e => {\n      this.textLayerRendered.emit(e);\n    });\n\n    this.pdfSinglePageLinkService = new PDFJSViewer.PDFLinkService({\n      eventBus\n    });\n    this.pdfSinglePageFindController = new PDFJSViewer.PDFFindController({\n      linkService: this.pdfSinglePageLinkService,\n      eventBus\n    });\n\n    const pdfOptions: PDFViewerParams | any = {\n      eventBus: eventBus,\n      container: this.element.nativeElement.querySelector('div'),\n      removePageBorders: !this._showBorders,\n      linkService: this.pdfSinglePageLinkService,\n      textLayerMode: this._renderText\n        ? this._renderTextMode\n        : RenderTextMode.DISABLED,\n      findController: this.pdfSinglePageFindController\n    };\n\n    this.pdfSinglePageViewer = new PDFJSViewer.PDFSinglePageViewer(pdfOptions);\n    this.pdfSinglePageLinkService.setViewer(this.pdfSinglePageViewer);\n    this.pdfSinglePageFindController.setDocument(this._pdf);\n\n    this.pdfSinglePageViewer._currentPageNumber = this._page;\n  }\n\n  private getValidPageNumber(page: number): number {\n    if (page < 1) {\n      return 1;\n    }\n\n    if (page > this._pdf.numPages) {\n      return this._pdf.numPages;\n    }\n\n    return page;\n  }\n\n  private getDocumentParams() {\n    const srcType = typeof this.src;\n\n    if (!this._cMapsUrl) {\n      return this.src;\n    }\n\n    const params: any = {\n      cMapUrl: this._cMapsUrl,\n      cMapPacked: true\n    };\n\n    if (srcType === 'string') {\n      params.url = this.src;\n    } else if (srcType === 'object') {\n      if ((this.src as any).byteLength !== undefined) {\n        params.data = this.src;\n      } else {\n        Object.assign(params, this.src);\n      }\n    }\n\n    return params;\n  }\n\n  private loadPDF() {\n    if (!this.src) {\n      return;\n    }\n\n    if (this.lastLoaded === this.src) {\n      this.update();\n      return;\n    }\n\n    this.clear();\n\n    this.loadingTask = (PDFJS as any).getDocument(this.getDocumentParams());\n\n    this.loadingTask.onProgress = (progressData: PDFProgressData) => {\n      this.onProgress.emit(progressData);\n    };\n\n    const src = this.src;\n    (<PDFPromise<PDFDocumentProxy>>this.loadingTask.promise).then(\n      (pdf: PDFDocumentProxy) => {\n        this._pdf = pdf;\n        this.lastLoaded = src;\n\n        this.afterLoadComplete.emit(pdf);\n\n        if (!this.pdfMultiPageViewer) {\n          this.setupMultiPageViewer();\n          this.setupSinglePageViewer();\n        }\n\n        this.resetPdfDocument();\n\n        this.update();\n      },\n      (error: any) => {\n        this.onError.emit(error);\n      }\n    );\n  }\n\n  private update() {\n    this.page = this._page;\n\n    this.render();\n  }\n\n  private render() {\n    this._page = this.getValidPageNumber(this._page);\n    const currentViewer = this.getCurrentViewer();\n\n    if (\n      this._rotation !== 0 ||\n      currentViewer.pagesRotation !== this._rotation\n    ) {\n      setTimeout(() => {\n        currentViewer.pagesRotation = this._rotation;\n      });\n    }\n\n    if (this._stickToPage) {\n      setTimeout(() => {\n        currentViewer.currentPageNumber = this._page;\n      });\n    }\n\n    this.updateSize();\n  }\n\n  private getScale(viewportWidth: number) {\n    const pdfContainerWidth =\n      this.pdfViewerContainer.nativeElement.clientWidth -\n      (this._showBorders ? 2 * PdfViewerComponent.BORDER_WIDTH : 0);\n\n    if (pdfContainerWidth === 0 || viewportWidth === 0) {\n      return 1;\n    }\n\n    return (\n      (this._zoom * (pdfContainerWidth / viewportWidth)) /\n      PdfViewerComponent.CSS_UNITS\n    );\n  }\n\n  private getCurrentViewer(): any {\n    return this._showAll ? this.pdfMultiPageViewer : this.pdfSinglePageViewer;\n  }\n\n  private resetPdfDocument() {\n    this.pdfFindController.setDocument(this._pdf);\n\n    if (this._showAll) {\n      this.pdfSinglePageViewer.setDocument(null);\n      this.pdfSinglePageLinkService.setDocument(null);\n\n      this.pdfMultiPageViewer.setDocument(this._pdf);\n      this.pdfMultiPageLinkService.setDocument(this._pdf, null);\n    } else {\n      this.pdfMultiPageViewer.setDocument(null);\n      this.pdfMultiPageLinkService.setDocument(null);\n\n      this.pdfSinglePageViewer.setDocument(this._pdf);\n      this.pdfSinglePageLinkService.setDocument(this._pdf, null);\n    }\n  }\n}\n","/**\n * Created by vadimdez on 01/11/2016.\n */\nimport { NgModule } from '@angular/core';\n\nimport { PdfViewerComponent } from './pdf-viewer.component';\nimport { PDFJSStatic } from 'pdfjs-dist';\n\ndeclare global {\n  const PDFJS: PDFJSStatic;\n}\n\nexport {\n  PDFJSStatic,\n  PDFDocumentProxy,\n  PDFViewerParams,\n  PDFPageProxy,\n  PDFSource,\n  PDFProgressData,\n  PDFPromise\n} from 'pdfjs-dist';\n\n@NgModule({\n  declarations: [PdfViewerComponent],\n  exports: [PdfViewerComponent]\n})\nexport class PdfViewerModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}